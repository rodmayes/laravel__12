import{s as A}from"./index-ChJKIlCL.js";import{s as te,a as oe}from"./index-DKoNZaGB.js";import{s as ne}from"./index-B6FSQOG7.js";import{s as ie,a as re}from"./index-J0zXWw-N.js";import{s as se}from"./index-B7cmCZ4f.js";import{s as z}from"./index-tTgwqWQu.js";import{i as ae,B as ce,s as le,a6 as C,J as F,p as w,b as h,a7 as O,w as a,K as j,d as i,m as y,e as d,c as B,g as L,F as R,L as T,n as N,t as P,a8 as ue,a9 as pe,r as E,T as me,a as _,o as fe,k as I,R as D,f as S,h as de}from"./app-Cxz8kPVe.js";import{s as be}from"./index-CfT6KGyY.js";import{_ as ge}from"./AppLayout-Bl-vab2g.js";import he from"./Create-DcVEdMR8.js";import ve from"./Edit-Dmg_nZRA.js";import{p as ye}from"./lodash-C8ehyM8K.js";import"./index-BpllR3yN.js";import"./index-CimEelRQ.js";import"./index-WfSVfh0v.js";import"./index-C-D5iXqe.js";import"./index-9Xaz2Oaa.js";import"./index-CrDboz2d.js";import"./index-Cgv2F6jj.js";import"./index-BGeYvXUX.js";import"./index-DvNqkBAG.js";import"./index-DUJJHCqo.js";import"./index-DywEHISW.js";import"./DropdownLink-DAhIJGaX.js";import"./index-BDd8EV_O.js";import"./index-oCGvJJos.js";import"./index-CYkK37In.js";import"./loadToast-BmxbEe_F.js";var ke=ae`
    .p-confirmdialog .p-dialog-content {
        display: flex;
        align-items: center;
        gap: dt('confirmdialog.content.gap');
    }

    .p-confirmdialog-icon {
        color: dt('confirmdialog.icon.color');
        font-size: dt('confirmdialog.icon.size');
        width: dt('confirmdialog.icon.size');
        height: dt('confirmdialog.icon.size');
    }
`,Ce={root:"p-confirmdialog",icon:"p-confirmdialog-icon",message:"p-confirmdialog-message",pcRejectButton:"p-confirmdialog-reject-button",pcAcceptButton:"p-confirmdialog-accept-button"},je=ce.extend({name:"confirmdialog",style:ke,classes:Ce}),Se={name:"BaseConfirmDialog",extends:le,props:{group:String,breakpoints:{type:Object,default:null},draggable:{type:Boolean,default:!0}},style:je,provide:function(){return{$pcConfirmDialog:this,$parentInstance:this}}},V={name:"ConfirmDialog",extends:Se,confirmListener:null,closeListener:null,data:function(){return{visible:!1,confirmation:null}},mounted:function(){var t=this;this.confirmListener=function(p){p&&p.group===t.group&&(t.confirmation=p,t.confirmation.onShow&&t.confirmation.onShow(),t.visible=!0)},this.closeListener=function(){t.visible=!1,t.confirmation=null},C.on("confirm",this.confirmListener),C.on("close",this.closeListener)},beforeUnmount:function(){C.off("confirm",this.confirmListener),C.off("close",this.closeListener)},methods:{accept:function(){this.confirmation.accept&&this.confirmation.accept(),this.visible=!1},reject:function(){this.confirmation.reject&&this.confirmation.reject(),this.visible=!1},onHide:function(){this.confirmation.onHide&&this.confirmation.onHide(),this.visible=!1}},computed:{appendTo:function(){return this.confirmation?this.confirmation.appendTo:"body"},target:function(){return this.confirmation?this.confirmation.target:null},modal:function(){return this.confirmation?this.confirmation.modal==null?!0:this.confirmation.modal:!0},header:function(){return this.confirmation?this.confirmation.header:null},message:function(){return this.confirmation?this.confirmation.message:null},blockScroll:function(){return this.confirmation?this.confirmation.blockScroll:!0},position:function(){return this.confirmation?this.confirmation.position:null},acceptLabel:function(){if(this.confirmation){var t,p=this.confirmation;return p.acceptLabel||((t=p.acceptProps)===null||t===void 0?void 0:t.label)||this.$primevue.config.locale.accept}return this.$primevue.config.locale.accept},rejectLabel:function(){if(this.confirmation){var t,p=this.confirmation;return p.rejectLabel||((t=p.rejectProps)===null||t===void 0?void 0:t.label)||this.$primevue.config.locale.reject}return this.$primevue.config.locale.reject},acceptIcon:function(){var t;return this.confirmation?this.confirmation.acceptIcon:(t=this.confirmation)!==null&&t!==void 0&&t.acceptProps?this.confirmation.acceptProps.icon:null},rejectIcon:function(){var t;return this.confirmation?this.confirmation.rejectIcon:(t=this.confirmation)!==null&&t!==void 0&&t.rejectProps?this.confirmation.rejectProps.icon:null},autoFocusAccept:function(){return this.confirmation.defaultFocus===void 0||this.confirmation.defaultFocus==="accept"},autoFocusReject:function(){return this.confirmation.defaultFocus==="reject"},closeOnEscape:function(){return this.confirmation?this.confirmation.closeOnEscape:!0}},components:{Dialog:A,Button:z}};function we(e,t,p,m,l,n){var v=F("Button"),b=F("Dialog");return h(),w(b,{visible:l.visible,"onUpdate:visible":[t[2]||(t[2]=function(r){return l.visible=r}),n.onHide],role:"alertdialog",class:N(e.cx("root")),modal:n.modal,header:n.header,blockScroll:n.blockScroll,appendTo:n.appendTo,position:n.position,breakpoints:e.breakpoints,closeOnEscape:n.closeOnEscape,draggable:e.draggable,pt:e.pt,unstyled:e.unstyled},O({default:a(function(){return[e.$slots.container?L("",!0):(h(),B(R,{key:0},[e.$slots.message?(h(),w(T(e.$slots.message),{key:1,message:l.confirmation},null,8,["message"])):(h(),B(R,{key:0},[j(e.$slots,"icon",{},function(){return[e.$slots.icon?(h(),w(T(e.$slots.icon),{key:0,class:N(e.cx("icon"))},null,8,["class"])):l.confirmation.icon?(h(),B("span",y({key:1,class:[l.confirmation.icon,e.cx("icon")]},e.ptm("icon")),null,16)):L("",!0)]}),d("span",y({class:e.cx("message")},e.ptm("message")),P(n.message),17)],64))],64))]}),_:2},[e.$slots.container?{name:"container",fn:a(function(r){return[j(e.$slots,"container",{message:l.confirmation,closeCallback:r.onclose,acceptCallback:n.accept,rejectCallback:n.reject})]}),key:"0"}:void 0,e.$slots.container?void 0:{name:"footer",fn:a(function(){var r;return[i(v,y({class:[e.cx("pcRejectButton"),l.confirmation.rejectClass],autofocus:n.autoFocusReject,unstyled:e.unstyled,text:((r=l.confirmation.rejectProps)===null||r===void 0?void 0:r.text)||!1,onClick:t[0]||(t[0]=function(u){return n.reject()})},l.confirmation.rejectProps,{label:n.rejectLabel,pt:e.ptm("pcRejectButton")}),O({_:2},[n.rejectIcon||e.$slots.rejecticon?{name:"icon",fn:a(function(u){return[j(e.$slots,"rejecticon",{},function(){return[d("span",y({class:[n.rejectIcon,u.class]},e.ptm("pcRejectButton").icon,{"data-pc-section":"rejectbuttonicon"}),null,16)]})]}),key:"0"}:void 0]),1040,["class","autofocus","unstyled","text","label","pt"]),i(v,y({label:n.acceptLabel,class:[e.cx("pcAcceptButton"),l.confirmation.acceptClass],autofocus:n.autoFocusAccept,unstyled:e.unstyled,onClick:t[1]||(t[1]=function(u){return n.accept()})},l.confirmation.acceptProps,{pt:e.ptm("pcAcceptButton")}),O({_:2},[n.acceptIcon||e.$slots.accepticon?{name:"icon",fn:a(function(u){return[j(e.$slots,"accepticon",{},function(){return[d("span",y({class:[n.acceptIcon,u.class]},e.ptm("pcAcceptButton").icon,{"data-pc-section":"acceptbuttonicon"}),null,16)]})]}),key:"0"}:void 0]),1040,["label","class","autofocus","unstyled","pt"])]}),key:"1"}]),1032,["visible","class","modal","header","blockScroll","appendTo","position","breakpoints","closeOnEscape","draggable","onUpdate:visible","pt","unstyled"])}V.render=we;const Be={class:"card"},Oe={class:"flex flex-wrap gap-2 items-center justify-between"},Ie={class:"text-xl font-bold"},De={class:"flex items-center gap-4"},Le={key:0},it={__name:"Index",props:{title:String,filters:Object,items:Object,perPage:Number},setup(e){ue().appContext.config.globalProperties.$toast;const{pickBy:p}=ye,m=e,l=pe(),n=E(!1),v=me({}),b=_({...m.items}),r=_({params:{search:m.filters.search,field:m.filters.field,order:m.filters.order,perPage:m.perPage??10},createOpen:!1,editOpen:!1,club:null}),u=()=>{const s=p(r.params);de.post(route("playtomic.club.refreshData"),s).then(o=>{Object.assign(b,o.data.items)})},U=s=>{l.require({message:"Are you sure you want to sync resources 's Club "+(s==null?void 0:s.name)+"?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Sync"},accept:()=>{H(s)},reject:()=>{}})},H=s=>{n.value=!1,v.get(route("playtomic.club.sync-resources",s==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>{u()},onError:()=>{},onFinish:()=>null})},M=()=>{var s;n.value=!1,v.delete(route("playtomic.club.destroy",(s=r.club)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>{v.reset(),u()},onError:()=>null,onFinish:()=>null})},x=s=>{r.params.page=s.page+1,r.params.perPage=s.rows,u()},J=s=>{var f;const o=(f=s.multiSortMeta)==null?void 0:f.map(k=>({field:k.field,order:k.order===1?"asc":"desc"}));r.params.sort=JSON.stringify(o),u()},K=()=>u();fe(()=>{u()});const Y=E([{label:"Playtomic"},{label:m.title,url:route("playtomic.club.index")}]);return(s,o)=>{const f=z,k=be,q=V,G=re,Q=se,W=ie,g=oe,X=ne,Z=te,ee=A;return h(),w(ge,{items:Y.value},{default:a(()=>[d("div",Be,[i(k,{class:"mb-4"},{start:a(()=>[I(i(f,{label:"Create",onClick:o[0]||(o[0]=c=>r.createOpen=!0),icon:"pi pi-plus"},null,512),[[D,s.can(["playtomic.club_create"])]])]),_:1}),i(he,{show:r.createOpen,onClose:o[1]||(o[1]=c=>r.createOpen=!1),title:m.title},null,8,["show","title"]),i(ve,{show:r.editOpen,onClose:o[2]||(o[2]=c=>r.editOpen=!1),club:r.club,title:m.title},null,8,["show","club","title"]),i(q),i(Z,{value:b.data,lazy:"",paginator:"",rows:b.per_page,totalRecords:b.total,first:(b.current_page-1)*b.per_page,rowsPerPageOptions:[5,10,20,50],sortMode:"multiple",sortField:"name",sortOrder:-1,onPage:x,onSort:J,tableStyle:"min-width: 50rem",size:"small"},{header:a(()=>[d("div",Oe,[d("span",Ie,P(m.title),1),i(W,null,{default:a(()=>[i(G,null,{default:a(()=>o[6]||(o[6]=[d("i",{class:"pi pi-search"},null,-1)])),_:1,__:[6]}),i(Q,{modelValue:r.params.search,"onUpdate:modelValue":o[3]||(o[3]=c=>r.params.search=c),placeholder:"Keyword Search",onInput:u},null,8,["modelValue"])]),_:1})])]),paginatorstart:a(()=>[i(f,{type:"button",icon:"pi pi-refresh",text:"",onClick:K})]),empty:a(()=>o[7]||(o[7]=[S(" No data found. ")])),loading:a(()=>o[8]||(o[8]=[S(" Loading data. Please wait. ")])),default:a(()=>[i(g,{header:"No",field:"id",sortable:""}),i(g,{field:"name",header:"Name",sortable:""}),i(g,{field:"playtomic_id",header:"PlaytomicId",sortable:""}),i(g,{field:"days_min_booking",header:"Days Min Booking",sortable:""}),i(g,{field:"timetable_summer",header:"Timetable Summer",sortable:""},{body:a(c=>[i(X,{severity:c.data.club?"success":"secondary",value:c.data.club?"Yes":"No"},null,8,["severity","value"])]),_:1}),i(g,{field:"booking_hour",header:"Booking hour",sortable:""}),i(g,{field:"number_resources",header:"# Resources",sortable:""}),i(g,{exportable:!1,style:{"min-width":"12rem"}},{body:a(c=>[I(i(f,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:$=>(r.editOpen=!0,r.club=c.data)},null,8,["onClick"]),[[D,s.can(["playtomic.club_edit"])]]),i(f,{icon:"pi pi-sync",outlined:"",rounded:"",severity:"warn",class:"mr-2",onClick:$=>U(c.data)},null,8,["onClick"]),I(i(f,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:$=>{n.value=!0,r.club=c.data}},null,8,["onClick"]),[[D,s.can(["playtomic.club_delete"])]])]),_:1})]),_:1},8,["value","rows","totalRecords","first"]),i(ee,{visible:n.value,"onUpdate:visible":o[5]||(o[5]=c=>n.value=c),style:{width:"450px"},header:"Confirm",modal:!0},{footer:a(()=>[i(f,{label:"No",icon:"pi pi-times",text:"",onClick:o[4]||(o[4]=c=>n.value=!1)}),i(f,{label:"Yes",icon:"pi pi-check",onClick:M})]),default:a(()=>[d("div",De,[o[11]||(o[11]=d("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1)),r.club?(h(),B("span",Le,[o[9]||(o[9]=S("Are you sure you want to delete ")),d("b",null,P(r.club.name),1),o[10]||(o[10]=S("?"))])):L("",!0)])]),_:1},8,["visible"])])]),_:1},8,["items"])}}};export{it as default};
