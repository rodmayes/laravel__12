import{s as $}from"./index-CC7TtCDa.js";import{s as N,a as S}from"./index-DBCduUWc.js";import{s as V}from"./index-CmLk1XAt.js";import{s as R}from"./index-BWRVypym.js";import{_ as B}from"./AppLayout-Du8wScWe.js";import{F as n,M as I,G as T,c as A,o as D,w as r,b as c,a as o,e as J,t as O,u as L,Y as _,L as M}from"./app-BXKsk4Hn.js";import U from"./DialogForm-CZQapKl7.js";import{p as q}from"./lodash-BgmbBU3H.js";import{l as E}from"./loadToast-BVWcLhCU.js";import"./index-Bvzdffx4.js";import"./index-CMJwYcPe.js";import"./index-DP5ewM03.js";import"./index-Dv-kvlDw.js";import"./index-CuD07zZf.js";import"./index-DUdGs5jH.js";import"./index-4sGh9kCV.js";import"./index-DNQpVgdC.js";import"./index-DP0y9bu6.js";import"./index-C5ismy7n.js";import"./index-CHrlQWtL.js";import"./index-DHW-Isfz.js";import"./index-BJiRVnqE.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-Qjj9tnQ_.js";import"./index-Yo9ZL1-U.js";import"./index-NU00o1A1.js";const F={class:"card"},G={class:"flex justify-between items-center mb-4"},Y={class:"flex justify-between"},z={class:"text-xl font-bold"},Ce={__name:"Index",props:{title:String,filters:Object,items:Object,availableCommands:Array,perPage:Number},setup(g){const{pickBy:h}=q;E();const s=g,i=n(s.items),u=n(null),m=n(!1),f=n(!1),C=()=>{u.value=null,f.value=!1,m.value=!0},k=t=>{u.value=t,f.value=!0,m.value=!0},x=t=>{confirm(`Â¿Seguro que deseas eliminar el comando "${t.command}"?`)&&_.delete(route("scheduled-job-commands.destroy",t.id),{onSuccess:()=>b()})},b=()=>{const t=h(v.params,e=>e!=null);M.post(route("scheduled-job-commands.index"),t).then(e=>{s.items.value=e.data.items})};I(b);const v=T({params:{search:s.filters.search,perPage:s.perPage??20,timetable:null,page:1,sort:{field:"command",order:"-1"}},booking:null}),y=n([{label:"Administration"},{label:s.title,url:route("scheduled-job-commands.index")}]);return(t,e)=>{const d=R,j=V,l=S,w=N,P=$;return D(),A(B,{items:y.value},{default:r(()=>[c("div",F,[c("div",G,[o(d,{label:"Nuevo",icon:"pi pi-plus",onClick:C})]),o(w,{value:i.value.data,stripedRows:"",responsiveLayout:"scroll"},{header:r(()=>[c("div",Y,[c("span",z,O(s.title),1),o(j,{modelValue:v.params.search,"onUpdate:modelValue":e[0]||(e[0]=a=>v.params.search=a),placeholder:"Search...",onInput:t.onRefresh},null,8,["modelValue","onInput"])])]),paginatorstart:r(()=>[o(d,{icon:"pi pi-refresh",text:"",onClick:t.onRefresh},null,8,["onClick"])]),empty:r(()=>e[3]||(e[3]=[J("No data found.")])),default:r(()=>[o(l,{field:"command",header:"Command",sortable:""}),o(l,{header:"Scheduled",field:"scheduled_for",sortable:""}),o(l,{header:"Parameters",body:a=>{var p;return((p=a.parameters)==null?void 0:p.join(", "))??"-"},sortable:""},null,8,["body"]),o(l,{field:"status",header:"Status",sortable:""}),o(l,{header:"Actions"},{body:r(({data:a})=>[o(d,{icon:"pi pi-pencil",class:"mr-2",onClick:p=>k(a),outlined:"",rounded:""},null,8,["onClick"]),o(d,{icon:"pi pi-trash",severity:"danger",onClick:p=>x(a),outlined:"",rounded:""},null,8,["onClick"])]),_:1})]),_:1},8,["value"]),o(P,{rows:i.value.per_page,totalRecords:i.value.total,first:(i.value.current_page-1)*i.value.per_page,rowsPerPageOptions:[5,10,20],onPage:e[1]||(e[1]=a=>L(_).visit(t.route("scheduled-job-commands.index",{page:a.page+1}))),class:"mt-3"},null,8,["rows","totalRecords","first"]),o(U,{visible:m.value,"onUpdate:visible":e[2]||(e[2]=a=>m.value=a),"available-commands":s.availableCommands,job:u.value,"is-editing":f.value,onRefresh:b},null,8,["visible","available-commands","job","is-editing"])])]),_:1},8,["items"])}}};export{Ce as default};
