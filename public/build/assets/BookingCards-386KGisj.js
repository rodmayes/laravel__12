import{i as N,B as U,a1 as K,a2 as Z,a3 as A,D as y,a4 as _,a5 as B,W as J,X,a6 as q,a7 as G,H,a8 as S,a9 as Q,aa as Y,A as tt,ab as E,ac as T,ad as D,r as et,a as ot,P as it,c as h,b as c,e as a,d as b,F as O,j as C,t as $,n as rt,f as M,u as R,p as k,g as I,k as nt,w as L,h as lt}from"./app-BxDWh9sJ.js";import{C as st}from"./index-CNIqUNf5.js";import{s as at}from"./index-D_Abxerg.js";import{s as pt}from"./index-CFj-I2Rk.js";import{s as dt}from"./index-CmZuPf0w.js";import{s as ut}from"./index-BUNM_beL.js";import{s as ct}from"./index-WpPmkClo.js";import{c as ft,p as vt}from"./useFormatters-DgKqr0j9.js";import{l as gt}from"./loadToast-DUYPYtFh.js";import"./index-wk5GZ11B.js";import"./index-B-3qvxa5.js";import"./index-Cx0fiM5w.js";import"./index-cr_iwp2r.js";import"./index-DCn_lInP.js";import"./index-D9-lTZn9.js";import"./index-DI3l9ENK.js";import"./index-BYnktkzF.js";var ht=N`
    .p-tooltip {
        position: absolute;
        display: none;
        max-width: dt('tooltip.max.width');
    }

    .p-tooltip-right,
    .p-tooltip-left {
        padding: 0 dt('tooltip.gutter');
    }

    .p-tooltip-top,
    .p-tooltip-bottom {
        padding: dt('tooltip.gutter') 0;
    }

    .p-tooltip-text {
        white-space: pre-line;
        word-break: break-word;
        background: dt('tooltip.background');
        color: dt('tooltip.color');
        padding: dt('tooltip.padding');
        box-shadow: dt('tooltip.shadow');
        border-radius: dt('tooltip.border.radius');
    }

    .p-tooltip-arrow {
        position: absolute;
        width: 0;
        height: 0;
        border-color: transparent;
        border-style: solid;
    }

    .p-tooltip-right .p-tooltip-arrow {
        margin-top: calc(-1 * dt('tooltip.gutter'));
        border-width: dt('tooltip.gutter') dt('tooltip.gutter') dt('tooltip.gutter') 0;
        border-right-color: dt('tooltip.background');
    }

    .p-tooltip-left .p-tooltip-arrow {
        margin-top: calc(-1 * dt('tooltip.gutter'));
        border-width: dt('tooltip.gutter') 0 dt('tooltip.gutter') dt('tooltip.gutter');
        border-left-color: dt('tooltip.background');
    }

    .p-tooltip-top .p-tooltip-arrow {
        margin-left: calc(-1 * dt('tooltip.gutter'));
        border-width: dt('tooltip.gutter') dt('tooltip.gutter') 0 dt('tooltip.gutter');
        border-top-color: dt('tooltip.background');
        border-bottom-color: dt('tooltip.background');
    }

    .p-tooltip-bottom .p-tooltip-arrow {
        margin-left: calc(-1 * dt('tooltip.gutter'));
        border-width: 0 dt('tooltip.gutter') dt('tooltip.gutter') dt('tooltip.gutter');
        border-top-color: dt('tooltip.background');
        border-bottom-color: dt('tooltip.background');
    }
`,mt={root:"p-tooltip p-component",arrow:"p-tooltip-arrow",text:"p-tooltip-text"},yt=U.extend({name:"tooltip-directive",style:ht,classes:mt}),_t=K.extend({style:yt});function bt(i,t){return kt(i)||Et(i,t)||wt(i,t)||$t()}function $t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wt(i,t){if(i){if(typeof i=="string")return j(i,t);var e={}.toString.call(i).slice(8,-1);return e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set"?Array.from(i):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?j(i,t):void 0}}function j(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,o=Array(t);e<t;e++)o[e]=i[e];return o}function Et(i,t){var e=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var o,r,n,p,v=[],d=!0,u=!1;try{if(n=(e=e.call(i)).next,t!==0)for(;!(d=(o=n.call(e)).done)&&(v.push(o.value),v.length!==t);d=!0);}catch(f){u=!0,r=f}finally{try{if(!d&&e.return!=null&&(p=e.return(),Object(p)!==p))return}finally{if(u)throw r}}return v}}function kt(i){if(Array.isArray(i))return i}function W(i,t,e){return(t=xt(t))in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function xt(i){var t=Tt(i,"string");return m(t)=="symbol"?t:t+""}function Tt(i,t){if(m(i)!="object"||!i)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var o=e.call(i,t);if(m(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function m(i){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(i)}var Ot=_t.extend("tooltip",{beforeMount:function(t,e){var o,r=this.getTarget(t);if(r.$_ptooltipModifiers=this.getModifiers(e),e.value){if(typeof e.value=="string")r.$_ptooltipValue=e.value,r.$_ptooltipDisabled=!1,r.$_ptooltipEscape=!0,r.$_ptooltipClass=null,r.$_ptooltipFitContent=!0,r.$_ptooltipIdAttr=T("pv_id")+"_tooltip",r.$_ptooltipShowDelay=0,r.$_ptooltipHideDelay=0,r.$_ptooltipAutoHide=!0;else if(m(e.value)==="object"&&e.value){if(D(e.value.value)||e.value.value.trim()==="")return;r.$_ptooltipValue=e.value.value,r.$_ptooltipDisabled=!!e.value.disabled===e.value.disabled?e.value.disabled:!1,r.$_ptooltipEscape=!!e.value.escape===e.value.escape?e.value.escape:!0,r.$_ptooltipClass=e.value.class||"",r.$_ptooltipFitContent=!!e.value.fitContent===e.value.fitContent?e.value.fitContent:!0,r.$_ptooltipIdAttr=e.value.id||T("pv_id")+"_tooltip",r.$_ptooltipShowDelay=e.value.showDelay||0,r.$_ptooltipHideDelay=e.value.hideDelay||0,r.$_ptooltipAutoHide=!!e.value.autoHide===e.value.autoHide?e.value.autoHide:!0}}else return;r.$_ptooltipZIndex=(o=e.instance.$primevue)===null||o===void 0||(o=o.config)===null||o===void 0||(o=o.zIndex)===null||o===void 0?void 0:o.tooltip,this.bindEvents(r,e),t.setAttribute("data-pd-tooltip",!0)},updated:function(t,e){var o=this.getTarget(t);if(o.$_ptooltipModifiers=this.getModifiers(e),this.unbindEvents(o),!!e.value){if(typeof e.value=="string")o.$_ptooltipValue=e.value,o.$_ptooltipDisabled=!1,o.$_ptooltipEscape=!0,o.$_ptooltipClass=null,o.$_ptooltipIdAttr=o.$_ptooltipIdAttr||T("pv_id")+"_tooltip",o.$_ptooltipShowDelay=0,o.$_ptooltipHideDelay=0,o.$_ptooltipAutoHide=!0,this.bindEvents(o,e);else if(m(e.value)==="object"&&e.value)if(D(e.value.value)||e.value.value.trim()===""){this.unbindEvents(o,e);return}else o.$_ptooltipValue=e.value.value,o.$_ptooltipDisabled=!!e.value.disabled===e.value.disabled?e.value.disabled:!1,o.$_ptooltipEscape=!!e.value.escape===e.value.escape?e.value.escape:!0,o.$_ptooltipClass=e.value.class||"",o.$_ptooltipFitContent=!!e.value.fitContent===e.value.fitContent?e.value.fitContent:!0,o.$_ptooltipIdAttr=e.value.id||o.$_ptooltipIdAttr||T("pv_id")+"_tooltip",o.$_ptooltipShowDelay=e.value.showDelay||0,o.$_ptooltipHideDelay=e.value.hideDelay||0,o.$_ptooltipAutoHide=!!e.value.autoHide===e.value.autoHide?e.value.autoHide:!0,this.bindEvents(o,e)}},unmounted:function(t,e){var o=this.getTarget(t);this.hide(t,0),this.remove(o),this.unbindEvents(o,e),o.$_ptooltipScrollHandler&&(o.$_ptooltipScrollHandler.destroy(),o.$_ptooltipScrollHandler=null)},timer:void 0,methods:{bindEvents:function(t,e){var o=this,r=t.$_ptooltipModifiers;r.focus?(t.$_ptooltipFocusEvent=function(n){return o.onFocus(n,e)},t.$_ptooltipBlurEvent=this.onBlur.bind(this),t.addEventListener("focus",t.$_ptooltipFocusEvent),t.addEventListener("blur",t.$_ptooltipBlurEvent)):(t.$_ptooltipMouseEnterEvent=function(n){return o.onMouseEnter(n,e)},t.$_ptooltipMouseLeaveEvent=this.onMouseLeave.bind(this),t.$_ptooltipClickEvent=this.onClick.bind(this),t.addEventListener("mouseenter",t.$_ptooltipMouseEnterEvent),t.addEventListener("mouseleave",t.$_ptooltipMouseLeaveEvent),t.addEventListener("click",t.$_ptooltipClickEvent)),t.$_ptooltipKeydownEvent=this.onKeydown.bind(this),t.addEventListener("keydown",t.$_ptooltipKeydownEvent),t.$_pWindowResizeEvent=this.onWindowResize.bind(this,t)},unbindEvents:function(t){var e=t.$_ptooltipModifiers;e.focus?(t.removeEventListener("focus",t.$_ptooltipFocusEvent),t.$_ptooltipFocusEvent=null,t.removeEventListener("blur",t.$_ptooltipBlurEvent),t.$_ptooltipBlurEvent=null):(t.removeEventListener("mouseenter",t.$_ptooltipMouseEnterEvent),t.$_ptooltipMouseEnterEvent=null,t.removeEventListener("mouseleave",t.$_ptooltipMouseLeaveEvent),t.$_ptooltipMouseLeaveEvent=null,t.removeEventListener("click",t.$_ptooltipClickEvent),t.$_ptooltipClickEvent=null),t.removeEventListener("keydown",t.$_ptooltipKeydownEvent),window.removeEventListener("resize",t.$_pWindowResizeEvent),t.$_ptooltipId&&this.remove(t)},bindScrollListener:function(t){var e=this;t.$_ptooltipScrollHandler||(t.$_ptooltipScrollHandler=new st(t,function(){e.hide(t)})),t.$_ptooltipScrollHandler.bindScrollListener()},unbindScrollListener:function(t){t.$_ptooltipScrollHandler&&t.$_ptooltipScrollHandler.unbindScrollListener()},onMouseEnter:function(t,e){var o=t.currentTarget,r=o.$_ptooltipShowDelay;this.show(o,e,r)},onMouseLeave:function(t){var e=t.currentTarget,o=e.$_ptooltipHideDelay,r=e.$_ptooltipAutoHide;if(r)this.hide(e,o);else{var n=E(t.target,"data-pc-name")==="tooltip"||E(t.target,"data-pc-section")==="arrow"||E(t.target,"data-pc-section")==="text"||E(t.relatedTarget,"data-pc-name")==="tooltip"||E(t.relatedTarget,"data-pc-section")==="arrow"||E(t.relatedTarget,"data-pc-section")==="text";!n&&this.hide(e,o)}},onFocus:function(t,e){var o=t.currentTarget,r=o.$_ptooltipShowDelay;this.show(o,e,r)},onBlur:function(t){var e=t.currentTarget,o=e.$_ptooltipHideDelay;this.hide(e,o)},onClick:function(t){var e=t.currentTarget,o=e.$_ptooltipHideDelay;this.hide(e,o)},onKeydown:function(t){var e=t.currentTarget,o=e.$_ptooltipHideDelay;t.code==="Escape"&&this.hide(t.currentTarget,o)},onWindowResize:function(t){tt()||this.hide(t),window.removeEventListener("resize",t.$_pWindowResizeEvent)},tooltipActions:function(t,e){if(!(t.$_ptooltipDisabled||!Q(t))){var o=this.create(t,e);this.align(t),!this.isUnstyled()&&Y(o,250);var r=this;window.addEventListener("resize",t.$_pWindowResizeEvent),o.addEventListener("mouseleave",function n(){r.hide(t),o.removeEventListener("mouseleave",n),t.removeEventListener("mouseenter",t.$_ptooltipMouseEnterEvent),setTimeout(function(){return t.addEventListener("mouseenter",t.$_ptooltipMouseEnterEvent)},50)}),this.bindScrollListener(t),H.set("tooltip",o,t.$_ptooltipZIndex)}},show:function(t,e,o){var r=this;o!==void 0?this.timer=setTimeout(function(){return r.tooltipActions(t,e)},o):this.tooltipActions(t,e)},tooltipRemoval:function(t){this.remove(t),this.unbindScrollListener(t),window.removeEventListener("resize",t.$_pWindowResizeEvent)},hide:function(t,e){var o=this;clearTimeout(this.timer),e!==void 0?setTimeout(function(){return o.tooltipRemoval(t)},e):this.tooltipRemoval(t)},getTooltipElement:function(t){return document.getElementById(t.$_ptooltipId)},getArrowElement:function(t){var e=this.getTooltipElement(t);return A(e,'[data-pc-section="arrow"]')},create:function(t){var e=t.$_ptooltipModifiers,o=S("div",{class:!this.isUnstyled()&&this.cx("arrow"),"p-bind":this.ptm("arrow",{context:e})}),r=S("div",{class:!this.isUnstyled()&&this.cx("text"),"p-bind":this.ptm("text",{context:e})});t.$_ptooltipEscape?(r.innerHTML="",r.appendChild(document.createTextNode(t.$_ptooltipValue))):r.innerHTML=t.$_ptooltipValue;var n=S("div",W(W({id:t.$_ptooltipIdAttr,role:"tooltip",style:{display:"inline-block",width:t.$_ptooltipFitContent?"fit-content":void 0,pointerEvents:!this.isUnstyled()&&t.$_ptooltipAutoHide&&"none"},class:[!this.isUnstyled()&&this.cx("root"),t.$_ptooltipClass]},this.$attrSelector,""),"p-bind",this.ptm("root",{context:e})),o,r);return document.body.appendChild(n),t.$_ptooltipId=n.id,this.$el=n,n},remove:function(t){if(t){var e=this.getTooltipElement(t);e&&e.parentElement&&(H.clear(e),document.body.removeChild(e)),t.$_ptooltipId=null}},align:function(t){var e=t.$_ptooltipModifiers;e.top?(this.alignTop(t),this.isOutOfBounds(t)&&(this.alignBottom(t),this.isOutOfBounds(t)&&this.alignTop(t))):e.left?(this.alignLeft(t),this.isOutOfBounds(t)&&(this.alignRight(t),this.isOutOfBounds(t)&&(this.alignTop(t),this.isOutOfBounds(t)&&(this.alignBottom(t),this.isOutOfBounds(t)&&this.alignLeft(t))))):e.bottom?(this.alignBottom(t),this.isOutOfBounds(t)&&(this.alignTop(t),this.isOutOfBounds(t)&&this.alignBottom(t))):(this.alignRight(t),this.isOutOfBounds(t)&&(this.alignLeft(t),this.isOutOfBounds(t)&&(this.alignTop(t),this.isOutOfBounds(t)&&(this.alignBottom(t),this.isOutOfBounds(t)&&this.alignRight(t)))))},getHostOffset:function(t){var e=t.getBoundingClientRect(),o=e.left+q(),r=e.top+G();return{left:o,top:r}},alignRight:function(t){this.preAlign(t,"right");var e=this.getTooltipElement(t),o=this.getArrowElement(t),r=this.getHostOffset(t),n=r.left+y(t),p=r.top+(_(t)-_(e))/2;e.style.left=n+"px",e.style.top=p+"px",o.style.top="50%",o.style.right=null,o.style.bottom=null,o.style.left="0"},alignLeft:function(t){this.preAlign(t,"left");var e=this.getTooltipElement(t),o=this.getArrowElement(t),r=this.getHostOffset(t),n=r.left-y(e),p=r.top+(_(t)-_(e))/2;e.style.left=n+"px",e.style.top=p+"px",o.style.top="50%",o.style.right="0",o.style.bottom=null,o.style.left=null},alignTop:function(t){this.preAlign(t,"top");var e=this.getTooltipElement(t),o=this.getArrowElement(t),r=y(e),n=y(t),p=B(),v=p.width,d=this.getHostOffset(t),u=d.left+(n-r)/2,f=d.top-_(e);u<0?u=0:u+r>v&&(u=Math.floor(d.left+n-r)),e.style.left=u+"px",e.style.top=f+"px";var s=d.left-this.getHostOffset(e).left+n/2;o.style.top=null,o.style.right=null,o.style.bottom="0",o.style.left=s+"px"},alignBottom:function(t){this.preAlign(t,"bottom");var e=this.getTooltipElement(t),o=this.getArrowElement(t),r=y(e),n=y(t),p=B(),v=p.width,d=this.getHostOffset(t),u=d.left+(n-r)/2,f=d.top+_(t);u<0?u=0:u+r>v&&(u=Math.floor(d.left+n-r)),e.style.left=u+"px",e.style.top=f+"px";var s=d.left-this.getHostOffset(e).left+n/2;o.style.top="0",o.style.right=null,o.style.bottom=null,o.style.left=s+"px"},preAlign:function(t,e){var o=this.getTooltipElement(t);o.style.left="-999px",o.style.top="-999px",J(o,"p-tooltip-".concat(o.$_ptooltipPosition)),!this.isUnstyled()&&X(o,"p-tooltip-".concat(e)),o.$_ptooltipPosition=e,o.setAttribute("data-p-position",e)},isOutOfBounds:function(t){var e=this.getTooltipElement(t),o=e.getBoundingClientRect(),r=o.top,n=o.left,p=y(e),v=_(e),d=B();return n+p>d.width||n<0||r<0||r+v>d.height},getTarget:function(t){var e;return Z(t,"p-inputwrapper")&&(e=A(t,"input"))!==null&&e!==void 0?e:t},getModifiers:function(t){return t.modifiers&&Object.keys(t.modifiers).length?t.modifiers:t.arg&&m(t.arg)==="object"?Object.entries(t.arg).reduce(function(e,o){var r=bt(o,2),n=r[0],p=r[1];return(n==="event"||n==="position")&&(e[p]=!0),e},{}):{}}}});const Ct={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},Lt={class:"flex justify-between items-start w-full mb-2"},Bt={class:"flex flex-col"},St={class:"font-bold text-white"},At={class:"text-sm text-gray-400"},Ht={class:"flex flex-col items-end text-sm"},Dt={class:"text-gray-400 whitespace-nowrap text-sm"},Mt={key:0},Rt={key:1},It={class:"flex justify-between"},jt={class:"mt-2 flex justify-start gap-2"},Wt={class:"mt-2 flex justify-end gap-2"},Ft={class:"grid grid-cols-1 gap-2"},re={__name:"BookingCards",props:{items:Object,onPageChange:Function,onSortChange:Function,onRefresh:Function,deleteDialog:Object,data:Object,deleteData:Function,router:Object,can:Function},emits:["confirmDelete"],setup(i,{emit:t}){const{toast:e}=gt(),o=i,r=et(!1),n=ot({booking:null,logs:[]}),p=t,v=it(()=>o.items.data??[]),d=f=>{n.logs=f&&f.log?JSON.parse(f.log):[],r.value=!0},u=f=>{lt.get(route("playtomic.bookings.toggle-booked",{booking:f.id})).then(()=>{e.add({severity:"success",summary:"Booking",detail:"Updated booked successfully",life:3e3}),this.emit("onRefresh")}).catch(()=>{e.add({severity:"error",summary:"Booking",detail:"Updated booked unSuccessfully",life:3e3})})};return(f,s)=>{const x=ct,w=ut,F=dt,P=pt,z=at,V=Ot;return c(),h("div",null,[a("div",Ct,[(c(!0),h(O,null,C(v.value,l=>(c(),h("div",{key:l.id,class:"p-4 border rounded shadow"},[a("div",Lt,[a("div",Bt,[a("h3",St,$(l.player.name),1),a("p",At,$(l.club.name),1)]),a("div",Ht,[a("span",{class:rt([{"text-green-700":l.status==="on-time","text-blue-700":l.status==="closed","text-red-700":l.status==="time-out"},"font-medium"])}," ["+$(l.id)+"] "+$(l.status),3),a("p",Dt,[l.modified_at&&!isNaN(Date.parse(l.modified_at))?(c(),h("span",Mt," Job: "+$(l.modified_at),1)):(c(),h("span",Rt,"-"))])])]),a("p",null,[s[3]||(s[3]=a("strong",null,"Booking day: ",-1)),M(" "+$(l.started_at?R(ft)(R(vt)(l.started_at)):""),1)]),a("p",null,[s[4]||(s[4]=a("strong",null,"Resources: ",-1)),(c(!0),h(O,null,C(l.resourcesNames,g=>(c(),k(x,{key:g.id,value:g.name},null,8,["value"]))),128))]),a("p",null,[s[5]||(s[5]=a("strong",null,"Timetables: ",-1)),(c(!0),h(O,null,C(l.timetablesNames,g=>(c(),k(x,{key:g.id,value:g.name},null,8,["value"]))),128))]),a("div",It,[a("div",jt,[l.is_booked?(c(),k(x,{key:0,severity:"success",value:"Booked",rounded:""})):(c(),k(x,{key:1,severity:"danger",value:"Non Booked",rounded:""}))]),a("div",Wt,[i.can(["playtomic.booking_edit"])?(c(),k(w,{key:0,icon:"pi pi-pencil",outlined:"",rounded:"",onClick:g=>f.$inertia.visit(f.route("playtomic.bookings.edit",l.id))},null,8,["onClick"])):I("",!0),b(w,{icon:"pi pi-comments",severity:"info",outlined:"",rounded:"",onClick:g=>d(l)},null,8,["onClick"]),nt(b(w,{icon:"pi pi-check",severity:"warn",outlined:"",rounded:"",onClick:g=>u(l)},null,8,["onClick"]),[[V,"Toggle booked"]]),i.can(["playtomic.booking_delete"])?(c(),k(w,{key:1,icon:"pi pi-trash",severity:"danger",outlined:"",rounded:"",onClick:g=>p("confirmDelete",l)},null,8,["onClick"])):I("",!0)])])]))),128))]),b(F,{class:"mt-4"},{start:L(()=>[b(w,{icon:"pi pi-refresh",text:"",onClick:s[0]||(s[0]=l=>p("onRefresh"))})]),end:L(()=>s[6]||(s[6]=[])),_:1}),b(P,{rows:i.items.per_page,totalRecords:i.items.total,first:(i.items.current_page-1)*i.items.per_page,onPage:o.onPageChange,rowsPerPageOptions:[5,10,20,50],class:"mt-4"},null,8,["rows","totalRecords","first","onPage"]),b(z,{visible:r.value,"onUpdate:visible":s[2]||(s[2]=l=>r.value=l),style:{width:"50rem"},header:"Logs",modal:!0,maximizable:""},{footer:L(()=>[b(w,{label:"Close",icon:"pi pi-times",text:"",onClick:s[1]||(s[1]=l=>r.value=!1)})]),default:L(()=>[a("div",Ft,[(c(!0),h(O,null,C(n.logs,l=>(c(),h("p",null,[a("small",null,[s[7]||(s[7]=a("i",{class:"fas fa-dot-circle"},null,-1)),M(" "+$(l),1)])]))),256))])]),_:1},8,["visible"])])}}};export{re as default};
