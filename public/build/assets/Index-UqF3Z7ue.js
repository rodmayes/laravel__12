import{s as z}from"./index-B5FKt3It.js";import{s as M,a as T}from"./index-CY0KFJ9r.js";import{s as j,a as F}from"./index-DvEu1BkS.js";import{s as L}from"./index-B8iOEnMR.js";import{s as J}from"./index-C-Rg3VL4.js";import{s as K}from"./index-cSgwQ100.js";import{r as v,T as U,a as w,o as Y,i as A,b as C,w as a,e as n,d as s,K as g,L as b,f as u,t as y,u as E,c as q,g as G,h as H}from"./app-ULZ4ZAEb.js";import{_ as Q}from"./AppLayout-ChdgOd20.js";import W from"./Create-CpmhtBio.js";import X from"./Edit-BQqkExc5.js";import Z from"./Import-BpSXlodT.js";import{p as ee}from"./lodash-DEQDDsa8.js";import{a as te}from"./useFormatters-DgKqr0j9.js";import"./index-C70yr8kA.js";import"./index-qbvNbHHM.js";import"./index-yv-qAUCS.js";import"./index-OWtXGIvL.js";import"./index-DFEJBaiI.js";import"./index-Cq-UX9Hm.js";import"./index-DgFixrIt.js";import"./index-_WgtLCcT.js";import"./index-B0phHS61.js";import"./index-XD9PKuO2.js";import"./index-l8FFwk_X.js";import"./DropdownLink-BWcTSRlk.js";import"./index-Bz54wLod.js";import"./index-DOoilzS3.js";import"./index-BjBZQ7gi.js";import"./loadToast-cPLvEfas.js";import"./index-DVKQFXMH.js";import"./index-CUYQLcCd.js";const se={class:"card"},oe={class:"flex flex-wrap gap-2 items-center justify-between"},re={class:"text-xl font-bold"},ae={class:"flex items-center gap-4"},le={key:0},je={__name:"Index",props:{title:String,results:Object,perPage:Number},setup($){const{pickBy:O}=ee,p=$,d=v(!1),_=U({}),m=w({...p.results}),t=w({params:{search:"",page:1,perPage:p.perPage??20,sort:JSON.stringify([{field:"date_at",order:"desc"}])},createOpen:!1,editOpen:!1,importOpen:!1,result:null}),i=()=>{const o=O(t.params);H.post(route("lottery.results.refreshData"),o).then(e=>{Object.assign(m,e.data.results)})},x=()=>{var o;d.value=!1,_.delete(route("lottery.results.destroy",(o=t.result)==null?void 0:o.id),{preserveScroll:!0,onSuccess:()=>{_.reset(),i()}})},k=o=>{t.params.page=o.page+1,t.params.perPage=o.rows,i()},h=o=>{var l;const e=(l=o.multiSortMeta)==null?void 0:l.map(c=>({field:c.field,order:c.order===1?"asc":"desc"}));t.params.sort=JSON.stringify(e),i()},S=()=>i();Y(()=>{i()});const N=v([{label:"Lottery"},{label:p.title,url:route("lottery.results.index")}]);return(o,e)=>{const l=K,c=J,D=F,P=L,I=j,f=T,V=M,B=z;return C(),A(Q,{items:N.value},{default:a(()=>[n("div",se,[s(c,{class:"mb-4"},{start:a(()=>[g(s(l,{label:"Create",onClick:e[0]||(e[0]=r=>t.createOpen=!0),icon:"pi pi-plus",severity:"success",size:"small",class:"mr-2"},null,512),[[b,o.can(["lottery.results_create"])]]),g(s(l,{label:"Import results from excel",onClick:e[1]||(e[1]=r=>t.importOpen=!0),icon:"pi pi-file-import",severity:"secondary",size:"small"},null,512),[[b,o.can(["lottery.results_import"])]])]),_:1}),s(W,{show:t.createOpen,onClose:e[2]||(e[2]=r=>{t.createOpen=!1,i()}),title:p.title},null,8,["show","title"]),s(X,{show:t.editOpen,onClose:e[3]||(e[3]=r=>{t.editOpen=!1,i()}),result:t.result,title:p.title},null,8,["show","result","title"]),s(Z,{show:t.importOpen,onClose:e[4]||(e[4]=r=>{t.importOpen=!1,i()})},null,8,["show"]),s(V,{value:m.data,lazy:"",paginator:"",rows:m.per_page,totalRecords:m.total,first:(m.current_page-1)*m.per_page,rowsPerPageOptions:[5,10,20,50],sortMode:"multiple",sortField:"date_at",sortOrder:-1,onPage:k,onSort:h,tableStyle:"min-width: 50rem",size:"small",stripedRows:""},{header:a(()=>[n("div",oe,[n("span",re,y(p.title),1),s(I,null,{default:a(()=>[s(D,null,{default:a(()=>e[8]||(e[8]=[n("i",{class:"pi pi-search"},null,-1)])),_:1,__:[8]}),s(P,{modelValue:t.params.search,"onUpdate:modelValue":e[5]||(e[5]=r=>t.params.search=r),placeholder:"Keyword Search",onInput:i},null,8,["modelValue"])]),_:1})])]),paginatorstart:a(()=>[s(l,{type:"button",icon:"pi pi-refresh",text:"",onClick:S})]),empty:a(()=>e[9]||(e[9]=[u(" No data found. ")])),loading:a(()=>e[10]||(e[10]=[u(" Loading data. Please wait. ")])),default:a(()=>[s(f,{header:"No",field:"id",sortable:""}),s(f,{field:"date_at",header:"Date",sortable:""},{body:a(({data:r})=>[u(y(E(te)(r.date_at,"d-m-Y")),1)]),_:1}),s(f,{field:"numbers",header:"Numbers",sortable:""}),s(f,{exportable:!1,style:{"min-width":"12rem"}},{body:a(r=>[g(s(l,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:R=>{t.editOpen=!0,t.result=r.data}},null,8,["onClick"]),[[b,o.can(["lottery.results_update"])]]),g(s(l,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:R=>{d.value=!0,t.result=r.data}},null,8,["onClick"]),[[b,o.can(["lottery.results_delete"])]])]),_:1})]),_:1},8,["value","rows","totalRecords","first"]),s(B,{visible:d.value,"onUpdate:visible":e[7]||(e[7]=r=>d.value=r),style:{width:"450px"},header:"Confirm",modal:!0},{footer:a(()=>[s(l,{label:"No",icon:"pi pi-times",text:"",onClick:e[6]||(e[6]=r=>d.value=!1)}),s(l,{label:"Yes",icon:"pi pi-check",onClick:x})]),default:a(()=>[n("div",ae,[e[13]||(e[13]=n("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1)),t.result?(C(),q("span",le,[e[11]||(e[11]=u(" Are you sure you want to delete ")),n("b",null,y(t.result.name),1),e[12]||(e[12]=u("? "))])):G("",!0)])]),_:1},8,["visible"])])]),_:1},8,["items"])}}};export{je as default};
