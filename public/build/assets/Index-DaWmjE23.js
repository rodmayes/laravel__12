import{s as z}from"./index-XZZn8wGU.js";import{s as A,a as L}from"./index-Dufz52zH.js";import{s as U}from"./index-DPTf6-gk.js";import{s as Y,a as q}from"./index-BdmbPcsQ.js";import{s as G}from"./index-BByHElJD.js";import{s as H}from"./index-CXZd4gE7.js";import{s as J}from"./index-BLObmXpr.js";import{s as K}from"./index-BqnOiHH4.js";import{a3 as Q,a4 as W,F as v,T as X,G as C,M as Z,c as ee,o as h,w as a,b as c,a as t,H as y,I as g,e as f,t as w,f as te,g as oe,L as se}from"./app-ZT2Cvq7Q.js";import{_ as re}from"./AppLayout-CnY1a1bq.js";import ae from"./Create-DXcye4cc.js";import ie from"./Edit-ayXJguCK.js";import{p as le}from"./lodash-DuqaDZVe.js";import"./index-B6rpEtJk.js";import"./index-B_I2eUS1.js";import"./index-CYo_M90q.js";import"./index-D27q2tvh.js";import"./index-DwbX7Vea.js";import"./index-LvVMXtpy.js";import"./index-Cjv_SjRQ.js";import"./index-BNSbANZM.js";import"./index-D2RD8szz.js";import"./index-BIZG_u5S.js";import"./index-Dw_XeGju.js";import"./index-CBDkM6LP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-tteuh8S0.js";import"./index-C0YZ3bxT.js";import"./index-WSTE_BT4.js";import"./index-BxlxQQOK.js";import"./loadToast-DXcnVCL_.js";const ne={class:"card"},pe={class:"flex flex-wrap gap-2 items-center justify-between"},ce={class:"text-xl font-bold"},me={class:"flex items-center gap-4"},ue={key:0},qe={__name:"Index",props:{title:String,filters:Object,items:Object,perPage:Number},setup(k){Q().appContext.config.globalProperties.$toast;const{pickBy:$}=le,l=k,x=W(),m=v(!1),b=X({}),u=C({...l.items}),s=C({params:{search:l.filters.search,field:l.filters.field,order:l.filters.order,perPage:l.perPage??10},createOpen:!1,editOpen:!1,club:null}),p=()=>{const o=$(s.params);se.post(route("playtomic.club.refreshData"),o).then(e=>{Object.assign(u,e.data.items)})},S=o=>{x.require({message:"Are you sure you want to sync resources 's Club "+(o==null?void 0:o.name)+"?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Sync"},accept:()=>{O(o)},reject:()=>{}})},O=o=>{m.value=!1,b.get(route("playtomic.club.sync-resources",o==null?void 0:o.id),{preserveScroll:!0,onSuccess:()=>{p()},onError:()=>{},onFinish:()=>null})},N=()=>{var o;m.value=!1,b.delete(route("playtomic.club.destroy",(o=s.club)==null?void 0:o.id),{preserveScroll:!0,onSuccess:()=>{b.reset(),p()},onError:()=>null,onFinish:()=>null})},P=o=>{s.params.page=o.page+1,s.params.perPage=o.rows,p()},D=o=>{var i;const e=(i=o.multiSortMeta)==null?void 0:i.map(d=>({field:d.field,order:d.order===1?"asc":"desc"}));s.params.sort=JSON.stringify(e),p()},I=()=>p();Z(()=>{p()});const B=v([{label:"Playtomic"},{label:l.title,url:route("playtomic.club.index")}]);return(o,e)=>{const i=K,d=J,R=H,V=q,j=G,F=Y,n=L,M=U,T=A,E=z;return h(),ee(re,{items:B.value},{default:a(()=>[c("div",ne,[t(d,{class:"mb-4"},{start:a(()=>[y(t(i,{label:"Create",onClick:e[0]||(e[0]=r=>s.createOpen=!0),icon:"pi pi-plus"},null,512),[[g,o.can(["playtomic.club_create"])]])]),_:1}),t(ae,{show:s.createOpen,onClose:e[1]||(e[1]=r=>s.createOpen=!1),title:l.title},null,8,["show","title"]),t(ie,{show:s.editOpen,onClose:e[2]||(e[2]=r=>s.editOpen=!1),club:s.club,title:l.title},null,8,["show","club","title"]),t(R),t(T,{value:u.data,lazy:"",paginator:"",rows:u.per_page,totalRecords:u.total,first:(u.current_page-1)*u.per_page,rowsPerPageOptions:[5,10,20,50],sortMode:"multiple",sortField:"name",sortOrder:-1,onPage:P,onSort:D,tableStyle:"min-width: 50rem",size:"small"},{header:a(()=>[c("div",pe,[c("span",ce,w(l.title),1),t(F,null,{default:a(()=>[t(V,null,{default:a(()=>e[6]||(e[6]=[c("i",{class:"pi pi-search"},null,-1)])),_:1,__:[6]}),t(j,{modelValue:s.params.search,"onUpdate:modelValue":e[3]||(e[3]=r=>s.params.search=r),placeholder:"Keyword Search",onInput:p},null,8,["modelValue"])]),_:1})])]),paginatorstart:a(()=>[t(i,{type:"button",icon:"pi pi-refresh",text:"",onClick:I})]),empty:a(()=>e[7]||(e[7]=[f(" No data found. ")])),loading:a(()=>e[8]||(e[8]=[f(" Loading data. Please wait. ")])),default:a(()=>[t(n,{header:"No",field:"id",sortable:""}),t(n,{field:"name",header:"Name",sortable:""}),t(n,{field:"playtomic_id",header:"PlaytomicId",sortable:""}),t(n,{field:"days_min_booking",header:"Days Min Booking",sortable:""}),t(n,{field:"timetable_summer",header:"Timetable Summer",sortable:""},{body:a(r=>[t(M,{severity:r.data.club?"success":"secondary",value:r.data.club?"Yes":"No"},null,8,["severity","value"])]),_:1}),t(n,{field:"booking_hour",header:"Booking hour",sortable:""}),t(n,{field:"number_resources",header:"# Resources",sortable:""}),t(n,{exportable:!1,style:{"min-width":"12rem"}},{body:a(r=>[y(t(i,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:_=>(s.editOpen=!0,s.club=r.data)},null,8,["onClick"]),[[g,o.can(["playtomic.club_edit"])]]),t(i,{icon:"pi pi-sync",outlined:"",rounded:"",severity:"warn",class:"mr-2",onClick:_=>S(r.data)},null,8,["onClick"]),y(t(i,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:_=>{m.value=!0,s.club=r.data}},null,8,["onClick"]),[[g,o.can(["playtomic.club_delete"])]])]),_:1})]),_:1},8,["value","rows","totalRecords","first"]),t(E,{visible:m.value,"onUpdate:visible":e[5]||(e[5]=r=>m.value=r),style:{width:"450px"},header:"Confirm",modal:!0},{footer:a(()=>[t(i,{label:"No",icon:"pi pi-times",text:"",onClick:e[4]||(e[4]=r=>m.value=!1)}),t(i,{label:"Yes",icon:"pi pi-check",onClick:N})]),default:a(()=>[c("div",me,[e[11]||(e[11]=c("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1)),s.club?(h(),te("span",ue,[e[9]||(e[9]=f("Are you sure you want to delete ")),c("b",null,w(s.club.name),1),e[10]||(e[10]=f("?"))])):oe("",!0)])]),_:1},8,["visible"])])]),_:1},8,["items"])}}};export{qe as default};
