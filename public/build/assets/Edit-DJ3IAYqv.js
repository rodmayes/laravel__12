import{s as V}from"./index-UnlfduWp.js";import{T as D,X as I,N as U,c as $,o as J,w as M,b as l,d as O,e as o,t as i,u as a,a as E}from"./app-BUGNN5JA.js";import{s as P}from"./index-Cg18yx5v.js";import{b as r}from"./useFormatters-DGNKrJCF.js";import{l as X}from"./loadToast-CkDWCmsi.js";const z={class:"flex flex-col gap-4"},A={class:"flex justify-begin mt-6 gap-2"},F={class:"flex justify-begin gap-2"},G={class:"flex justify-begin gap-2"},H={class:"flex justify-begin gap-2"},K={class:"flex justify-begin gap-2"},L={class:"flex justify-begin gap-2"},Q={class:"flex justify-begin gap-2"},R={class:"flex justify-begin gap-2"},W={class:"flex justify-begin gap-2"},Y={class:"flex justify-end gap-2"},ae={__name:"Edit",props:{show:Boolean,title:String,job:Object},emits:["update:show"],setup(N,{emit:k}){var n,p,f,_,j,h,y,g,m,x;X();const s=N,c=k,t=D({schedulable:(n=s.job)==null?void 0:n.schedulable,schedulable_type:(p=s.job)==null?void 0:p.schedulable_type,schedulable_id:(f=s.job)==null?void 0:f.schedulable_id,status:(_=s.job)==null?void 0:_.status,executed_at:(j=s.job)==null?void 0:j.executed_at,cancelled_at:(h=s.job)==null?void 0:h.cancelled_at,payload:(y=s.job)==null?void 0:y.payload,job_id:(g=s.job)==null?void 0:g.job_id,scheduled_for:(x=(m=s.job)==null?void 0:m.scheduled_for)==null?void 0:x.substring(0,16)});I(()=>s.job,d=>{var e;t.job_id=d==null?void 0:d.job_id,t.scheduled_for=(e=d==null?void 0:d.scheduled_for)==null?void 0:e.substring(0,16)});const T=()=>{t.put(route("scheduled-jobs.update",s.job.id),{onSuccess:()=>{c("update:show",!1)}})};return U(()=>{var d,e,u,b,v,w,q,S,B,C;s.show&&(t.errors={},t.schedulable=(d=s.job)==null?void 0:d.schedulable,t.schedulable_type=(e=s.job)==null?void 0:e.schedulable_type,t.schedulable_id=(u=s.job)==null?void 0:u.schedulable_id,t.status=(b=s.job)==null?void 0:b.status,t.executed_at=(v=s.job)==null?void 0:v.executed_at,t.cancelled_at=(w=s.job)==null?void 0:w.cancelled_at,t.payload=(q=s.job)==null?void 0:q.payload,t.job_id=(S=s.job)==null?void 0:S.jpb_id,t.scheduled_for=(C=(B=s.job)==null?void 0:B.scheduled_for)==null?void 0:C.substring(0,16))}),(d,e)=>{const u=V;return J(),$(a(P),{visible:s.show,"onUpdate:visible":e[1]||(e[1]=b=>s.show=b),position:"top",modal:"",header:"Edit "+s.title,style:{width:"50rem"},closable:!1},{default:M(()=>[l("form",{onSubmit:O(T,["prevent"])},[l("div",z,[l("div",A,[e[2]||(e[2]=l("label",{class:"required"},"Schedulable: ",-1)),o(" "+i(a(t).schedulable.name),1)]),l("div",F,[e[3]||(e[3]=l("label",{class:"required"},"Schedulable type: ",-1)),o(" "+i(a(t).schedulable_type),1)]),l("div",G,[e[4]||(e[4]=l("label",{class:"required"},"Schedulable Id: ",-1)),o(" "+i(a(t).schedulable_id),1)]),l("div",H,[e[5]||(e[5]=l("label",{class:"required"},"Job Id: ",-1)),o(" "+i(a(t).job_id),1)]),l("div",K,[e[6]||(e[6]=l("label",{class:"required"},"Status: ",-1)),o(" "+i(a(t).status),1)]),l("div",L,[e[7]||(e[7]=l("label",{class:"required"},"Scheduled: ",-1)),o(" "+i(a(r)(a(t).scheduled_for)),1)]),l("div",Q,[e[8]||(e[8]=l("label",{class:"required"},"Executed: ",-1)),o(" "+i(a(r)(a(t).executed_at)),1)]),l("div",R,[e[9]||(e[9]=l("label",{class:"required"},"Cancelled: ",-1)),o(" "+i(a(r)(a(t).cancelled_at)),1)]),l("div",W,[e[10]||(e[10]=l("label",{class:"required"},"Payload: ",-1)),o(" "+i(a(t).payload),1)]),l("div",Y,[E(u,{type:"button",label:"Cancel",severity:"secondary",onClick:e[0]||(e[0]=b=>c("close"))}),E(u,{type:"submit",label:"Update"})])])],32)]),_:1},8,["visible","header"])}}};export{ae as default};
