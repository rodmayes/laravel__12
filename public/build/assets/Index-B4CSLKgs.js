import{s as P}from"./index-CimEelRQ.js";import{s as $,a as S}from"./index-DKoNZaGB.js";import{s as V}from"./index-B7cmCZ4f.js";import{s as R}from"./index-tTgwqWQu.js";import{_ as B}from"./AppLayout-Bl-vab2g.js";import{r as n,o as I,a as T,p as A,b as D,w as r,e as c,d as o,f as J,t as O,u as U,N as _,h as q}from"./app-Cxz8kPVe.js";import E from"./DialogForm-AWWd6gaV.js";import{p as L}from"./lodash-C8ehyM8K.js";import{l as M}from"./loadToast-BmxbEe_F.js";import"./index-WfSVfh0v.js";import"./index-BpllR3yN.js";import"./index-C-D5iXqe.js";import"./index-J0zXWw-N.js";import"./index-9Xaz2Oaa.js";import"./index-CrDboz2d.js";import"./index-Cgv2F6jj.js";import"./index-BGeYvXUX.js";import"./index-DvNqkBAG.js";import"./index-DUJJHCqo.js";import"./index-ChJKIlCL.js";import"./index-DywEHISW.js";import"./DropdownLink-DAhIJGaX.js";import"./index-BDd8EV_O.js";import"./index-oCGvJJos.js";const z={class:"card"},F={class:"flex justify-between items-center mb-4"},G={class:"flex justify-between"},H={class:"text-xl font-bold"},he={__name:"Index",props:{title:String,filters:Object,items:Object,availableCommands:Array,perPage:Number},setup(h){const{pickBy:g}=L;M();const s=h,l=n(s.items),u=n(null),d=n(!1),f=n(!1),C=()=>{u.value=null,f.value=!1,d.value=!0},k=t=>{u.value=t,f.value=!0,d.value=!0},x=t=>{confirm(`Â¿Seguro que deseas eliminar el comando "${t.command}"?`)&&_.delete(route("scheduled-job-commands.destroy",t.id),{onSuccess:()=>b()})},b=()=>{const t=g(v.params,e=>e!=null);q.post(route("scheduled-job-commands.index"),t).then(e=>{s.items.value=e.data.items})};I(b);const v=T({params:{search:s.filters.search,perPage:s.perPage??20,timetable:null,page:1,sort:{field:"command",order:"-1"}},booking:null}),y=n([{label:"Administration"},{label:s.title,url:route("scheduled-job-commands.index")}]);return(t,e)=>{const m=R,j=V,i=S,w=$,N=P;return D(),A(B,{items:y.value},{default:r(()=>[c("div",z,[c("div",F,[o(m,{label:"Nuevo",icon:"pi pi-plus",onClick:C})]),o(w,{value:l.value.data,stripedRows:"",responsiveLayout:"scroll"},{header:r(()=>[c("div",G,[c("span",H,O(s.title),1),o(j,{modelValue:v.params.search,"onUpdate:modelValue":e[0]||(e[0]=a=>v.params.search=a),placeholder:"Search...",onInput:t.onRefresh},null,8,["modelValue","onInput"])])]),paginatorstart:r(()=>[o(m,{icon:"pi pi-refresh",text:"",onClick:t.onRefresh},null,8,["onClick"])]),empty:r(()=>e[3]||(e[3]=[J("No data found.")])),default:r(()=>[o(i,{field:"command",header:"Command",sortable:""}),o(i,{header:"Scheduled",field:"scheduled_for",sortable:""}),o(i,{header:"Parameters",body:a=>{var p;return((p=a.parameters)==null?void 0:p.join(", "))??"-"},sortable:""},null,8,["body"]),o(i,{field:"status",header:"Status",sortable:""}),o(i,{header:"Actions"},{body:r(({data:a})=>[o(m,{icon:"pi pi-pencil",class:"mr-2",onClick:p=>k(a),outlined:"",rounded:""},null,8,["onClick"]),o(m,{icon:"pi pi-trash",severity:"danger",onClick:p=>x(a),outlined:"",rounded:""},null,8,["onClick"])]),_:1})]),_:1},8,["value"]),o(N,{rows:l.value.per_page,totalRecords:l.value.total,first:(l.value.current_page-1)*l.value.per_page,rowsPerPageOptions:[5,10,20],onPage:e[1]||(e[1]=a=>U(_).visit(t.route("scheduled-job-commands.index",{page:a.page+1}))),class:"mt-3"},null,8,["rows","totalRecords","first"]),o(E,{visible:d.value,"onUpdate:visible":e[2]||(e[2]=a=>d.value=a),"available-commands":s.availableCommands,job:u.value,"is-editing":f.value,onRefresh:b},null,8,["visible","available-commands","job","is-editing"])])]),_:1},8,["items"])}}};export{he as default};
