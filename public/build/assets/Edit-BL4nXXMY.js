import{s as S}from"./index-UnlfduWp.js";import{s as w}from"./index-BH19Py2R.js";import{s as L}from"./index-Vtcjvk_5.js";import{s as U}from"./index-jrJKlSHv.js";import{s as j}from"./index-yq2RJvWw.js";import{T as B,F as f,M as P,L as _,X as q,c as D,o as i,w as O,b as l,d as E,a,f as n,g as d,u as t,t as u}from"./app-BUGNN5JA.js";import{_ as N}from"./AppLayout-hxMZJ4a3.js";import{l as $}from"./loadToast-CkDWCmsi.js";import{a as M}from"./useFormatters-DGNKrJCF.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Dfx5MwNy.js";import"./index-CulZY4AK.js";import"./index-D7AR1XY8.js";import"./index-C0RVGQQ7.js";import"./index-Nr5CUFq_.js";import"./index-DTCRZRZj.js";import"./index-DMS4686z.js";import"./DropdownLink-CH1mWxBr.js";import"./index-BO7XlLjM.js";const h={class:"card"},C={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},I={class:"md:col-span-1"},F={key:0,class:"text-red-500"},R={class:"md:col-span-2 flex flex-col gap-4"},W={class:"flex flex-col gap-2"},X={key:0,class:"text-red-500"},z={class:"flex flex-col gap-2"},A={key:0,class:"text-red-500"},G={class:"flex flex-col gap-2"},H={key:0,class:"text-red-500"},J={class:"flex flex-col gap-2"},K={key:0,class:"text-red-500"},Q={class:"flex flex-col gap-2"},Y={key:0,class:"text-red-500"},Z={class:"flex justify-between"},ee={key:0,class:"text-red-500"},oe={class:"flex justify-end mt-6 gap-2"},te=["href"],le={__name:"Edit",props:{booking:Object,clubs:Object,resources:Object,timetables:Object,bookingPreferences:Object,players:Object,durations:Object,title:String},setup(g){$();const s=g,e=B({started_at:new Date(s.booking.started_at??new Date),club_id:s.booking.club_id,resources:(typeof s.booking.resources=="string"?s.booking.resources.split(",").map(Number):s.booking.resources)??[],timetables:(typeof s.booking.timetables=="string"?s.booking.timetables.split(",").map(Number):s.booking.timetables)??[],booking_preference:s.booking.booking_preference,player_email:s.booking.player_email,duration:s.booking.duration,public:s.booking.public}),k=()=>{e.started_at=M(e.started_at),e.put(route("playtomic.bookings.update",s.booking.id))},m=f(s.resources);P(async()=>{if(e.club_id){const p=await _.post(route("playtomic.resources.filter",{club:e.club_id}));m.value=p.data}}),q(()=>e.club_id,async p=>{if(!p){m.value=[],e.resources=[];return}try{const o=await _.post(route("playtomic.resources.filter",{club:p}));m.value=o.data,e.resources=[]}catch(o){console.error("Error fetching resources:",o),m.value=[]}});const y=f([{label:"Playtomic"},{label:s.title,url:route("playtomic.bookings.index")},{label:"Edit",url:route("playtomic.bookings.edit",s.booking.id)}]);return(p,o)=>{const V=j,c=U,b=L,x=w,v=S;return i(),D(N,{items:y.value},{default:O(()=>[l("div",h,[o[16]||(o[16]=l("h1",{class:"text-2xl font-bold mb-4"},"Edit Booking",-1)),l("form",{onSubmit:E(k,["prevent"]),class:"space-y-6"},[l("div",C,[l("div",I,[o[8]||(o[8]=l("label",{value:"Start Date",class:"required"},null,-1)),a(V,{modelValue:t(e).started_at,"onUpdate:modelValue":o[0]||(o[0]=r=>t(e).started_at=r),inline:"",dateFormat:"yy-mm-dd",touchUI:!1,showIcon:!1,class:"w-full",style:{minWidth:"18rem"}},null,8,["modelValue"]),t(e).errors.started_at?(i(),n("small",F,u(t(e).errors.started_at),1)):d("",!0)]),l("div",R,[l("div",W,[o[9]||(o[9]=l("label",{class:"required"},"Club",-1)),a(c,{modelValue:t(e).club_id,"onUpdate:modelValue":o[1]||(o[1]=r=>t(e).club_id=r),options:s.clubs,optionValue:"id",optionLabel:"name",placeholder:"Select a club"},null,8,["modelValue","options"]),t(e).errors.club_id?(i(),n("small",X,u(t(e).errors.club_id),1)):d("",!0)]),l("div",z,[o[10]||(o[10]=l("label",{for:"resources",required:""},"Resources",-1)),a(b,{modelValue:t(e).resources,"onUpdate:modelValue":o[2]||(o[2]=r=>t(e).resources=r),options:m.value,optionValue:"id",optionLabel:"name",placeholder:"Select resources",filter:""},null,8,["modelValue","options"]),t(e).errors.resources?(i(),n("small",A,u(t(e).errors.resources),1)):d("",!0)]),l("div",G,[o[11]||(o[11]=l("label",{for:"timetables",required:""},"Timetables",-1)),a(b,{modelValue:t(e).timetables,"onUpdate:modelValue":o[3]||(o[3]=r=>t(e).timetables=r),options:s.timetables,optionValue:"id",optionLabel:"name",placeholder:"Select timetables",filter:""},null,8,["modelValue","options"]),t(e).errors.timetables?(i(),n("small",H,u(t(e).errors.timetables),1)):d("",!0)]),l("div",J,[o[12]||(o[12]=l("label",{for:"booking_preference",required:""},"Booking Preference",-1)),a(c,{modelValue:t(e).booking_preference,"onUpdate:modelValue":o[4]||(o[4]=r=>t(e).booking_preference=r),options:s.bookingPreferences,optionValue:"id",optionLabel:"name",placeholder:"Select preference"},null,8,["modelValue","options"]),t(e).errors.booking_preference?(i(),n("small",K,u(t(e).errors.booking_preference),1)):d("",!0)]),l("div",Q,[o[13]||(o[13]=l("label",{required:""},"Player",-1)),a(c,{modelValue:t(e).player_email,"onUpdate:modelValue":o[5]||(o[5]=r=>t(e).player_email=r),options:s.players,optionValue:"email",optionLabel:"name",placeholder:"Select player"},null,8,["modelValue","options"]),t(e).errors.player_email?(i(),n("small",Y,u(t(e).errors.player_email),1)):d("",!0)]),l("div",Z,[l("div",null,[o[14]||(o[14]=l("label",{for:"duration",class:"required mr-2"},"Duration",-1)),a(c,{modelValue:t(e).duration,"onUpdate:modelValue":o[6]||(o[6]=r=>t(e).duration=r),options:s.durations,optionValue:"id",optionLabel:"name",placeholder:"Select duration"},null,8,["modelValue","options"]),t(e).errors.duration?(i(),n("small",ee,u(t(e).errors.duration),1)):d("",!0)]),l("div",null,[o[15]||(o[15]=l("label",{for:"public",class:"mr-2"},"Is Public",-1)),a(x,{modelValue:t(e).public,"onUpdate:modelValue":o[7]||(o[7]=r=>t(e).public=r),onLabel:"Public",offLabel:"No public"},null,8,["modelValue"])])])])]),l("div",oe,[a(v,{type:"submit",label:"Update"}),l("a",{href:p.route("playtomic.bookings.index"),class:"border border-gray-300 px-4 py-2 rounded-md"}," Cancel ",8,te)])],32)])]),_:1},8,["items"])}}},Se=T(le,[["__scopeId","data-v-9b2dfa29"]]);export{Se as default};
