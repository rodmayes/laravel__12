import{s as U}from"./index-BU8twPeb.js";import{s as j}from"./index-L9jds0UM.js";import{s as O}from"./index-Dlv-tlzd.js";import{T as $,N as I,c as C,o as i,w as b,b as s,d as F,a as p,f as d,g as _,u as a,t as c,J as x,K as g,e as N}from"./app-BtWIXAZa.js";import{l as J}from"./loadToast-BamORZED.js";import"./index-Ce-uaxe7.js";import"./index-BoNuv7pC.js";import"./index-Bu9fg-KM.js";import"./index-X78qv4tB.js";import"./index-D1785TMw.js";const T={class:"flex flex-col gap-4"},Y={class:"flex flex-col lg:flex-row gap-10 items-start justify-center w-full"},A={class:"flex flex-col gap-2"},G={key:0,class:"text-red-500"},K={class:"flex flex-col gap-2 flex-1"},L={class:"flex flex-col gap-2"},M={key:0,class:"text-red-500"},P={class:"flex flex-col gap-2"},W={class:"flex flex-wrap gap-2 max-w-full overflow-x-auto"},q={key:0,class:"text-red-500"},z={class:"flex justify-end gap-2"},ae={__name:"Edit",props:{show:Boolean,title:String,result:Object},emits:["close"],setup(S,{emit:E}){const{toast:f}=J(),n=S,v=E,e=$({date_at:"",numbers:[],complementary:null}),V=()=>{var t;if(e.numbers.length!==6){f.add({severity:"error",summary:"Error",detail:"You must select exactly 6 numbers",life:3e3});return}if(!e.complementary){f.add({severity:"error",summary:"Error",detail:"You must select one complementary number",life:3e3});return}const r={date_at:e.date_at instanceof Date?e.date_at.toISOString().slice(0,10):e.date_at,numbers:JSON.stringify(e.numbers),complementary:e.complementary};e.put(route("lottery.results.update",(t=n.result)==null?void 0:t.id),{...r,preserveScroll:!0,onSuccess:()=>{v("close"),e.reset()},onError:()=>{var m;if(e.response&&e.response.status===500){const l=((m=e.response.data)==null?void 0:m.message)||"Unexpected error";f.add({severity:"error",summary:"Server Error",detail:l,life:4e3})}},onFinish:()=>null})},B=r=>{const t=e.numbers.indexOf(r);t===-1?e.numbers.length<6&&e.numbers.push(r):e.numbers.splice(t,1)},w=Array.from({length:49},(r,t)=>t+1),h=[];for(let r=0;r<w.length;r+=10)h.push(w.slice(r,r+10));const D=r=>{e.complementary=r};return I(()=>{var r,t;if(n.show){e.errors={},e.date_at=(r=n.result)!=null&&r.date_at?new Date(n.result.date_at):null;try{let l=((t=n.result)!=null&&t.numbers?JSON.parse(n.result.numbers):[]).map(y=>parseInt(y));e.numbers=l.slice(0,6),e.complementary=l.length>6?l[6]:null}catch{e.numbers=[],e.complementary=null}}}),(r,t)=>{const m=O,l=j,y=U;return i(),C(y,{visible:n.show,"onUpdate:visible":t[2]||(t[2]=o=>n.show=o),position:"top",modal:"",header:"Update "+n.title,style:{width:"60rem"},closable:!1},{default:b(()=>[s("form",{onSubmit:F(V,["prevent"])},[s("div",T,[s("div",Y,[s("div",A,[t[3]||(t[3]=s("label",{for:"date_at"},"Date",-1)),p(m,{modelValue:a(e).date_at,"onUpdate:modelValue":t[0]||(t[0]=o=>a(e).date_at=o),inline:"",dateFormat:"yy-mm-dd",touchUI:!1,showIcon:!1,class:"w-full lg:w-[20rem] min-w-[18rem]",style:{minWidth:"18rem"}},null,8,["modelValue"]),a(e).errors.date_at?(i(),d("small",G,c(a(e).errors.date_at),1)):_("",!0)]),s("div",K,[t[4]||(t[4]=s("label",{for:"numbers"},"Numbers (select 6 from 1â€“49)",-1)),s("div",L,[(i(),d(x,null,g(h,(o,k)=>s("div",{key:"row-"+k,class:"flex flex-wrap gap-2"},[(i(!0),d(x,null,g(o,u=>(i(),C(l,{key:"btn-"+u,onClick:H=>B(u),severity:a(e).numbers.includes(u)?"":"secondary",class:"w-10 h-10 text-sm font-semibold rounded-md border transition-all flex items-center justify-center border-gray-300 dark:border-gray-600"},{default:b(()=>[N(c(u),1)]),_:2},1032,["onClick","severity"]))),128))])),64))]),a(e).errors.numbers?(i(),d("small",M,c(a(e).errors.numbers),1)):_("",!0)])]),s("div",P,[t[5]||(t[5]=s("label",{for:"complementary"},"Complementary Number (select one)",-1)),s("div",W,[(i(),d(x,null,g(49,o=>p(l,{key:"complementary-"+o,onClick:k=>D(o),severity:a(e).complementary===o?"":"secondary",class:"w-10 h-10 text-sm font-semibold rounded-md border transition-all flex items-center justify-center border-gray-300 dark:border-gray-600"},{default:b(()=>[N(c(o),1)]),_:2},1032,["onClick","severity"])),64))]),a(e).errors.complementary?(i(),d("small",q,c(a(e).errors.complementary),1)):_("",!0)]),s("div",z,[p(l,{type:"button",label:"Cancel",severity:"secondary",onClick:t[1]||(t[1]=o=>v("close"))}),p(l,{type:"submit",label:"Update"})])])],32)]),_:1},8,["visible","header"])}}};export{ae as default};
