import{s as S}from"./index-EveoIXv-.js";import{s as j}from"./index-18OXH6E6.js";import{s as w}from"./index-CLAgobbg.js";import{s as U}from"./index-CKOC9m5P.js";import{s as L}from"./index-BU4GTOPz.js";import{T as B,r as f,o as N,h as _,Y as P,i as q,b as a,w as D,e as l,j as O,d as i,c as n,g as d,u as t,t as u,N as E}from"./app-BYfn7zQ6.js";import{_ as $}from"./AppLayout-r15PKijx.js";import{l as h}from"./loadToast-BGJwt8zz.js";import{c as T}from"./useFormatters-C4jh3d5C.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DGgCMOXL.js";import"./index-DNAkVsc3.js";import"./index-B6C5P1Nr.js";import"./index-Br3uKoNN.js";import"./index-DkFFURBA.js";import"./index-CkKtAwnn.js";import"./index-ByFrJVEI.js";import"./DropdownLink-CaoQdTSc.js";import"./index-Cthk_FKP.js";const I={class:"card"},M={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},R={class:"md:col-span-1"},F={key:0,class:"text-red-500"},W={class:"md:col-span-2 flex flex-col gap-4"},Y={class:"flex flex-col gap-2"},z={key:0,class:"text-red-500"},A={class:"flex flex-col gap-2"},G={key:0,class:"text-red-500"},H={class:"flex flex-col gap-2"},J={key:0,class:"text-red-500"},K={class:"flex flex-col gap-2"},Q={key:0,class:"text-red-500"},X={class:"flex flex-col gap-2"},Z={key:0,class:"text-red-500"},ee={class:"flex justify-between"},oe={key:0,class:"text-red-500"},te={class:"flex justify-end mt-6 gap-2"},le=["href"],se={__name:"Edit",props:{booking:Object,clubs:Object,resources:Object,timetables:Object,bookingPreferences:Object,players:Object,durations:Object,title:String},setup(g){h();const s=g,e=B({started_at:new Date(s.booking.started_at??new Date),club_id:s.booking.club_id,resources:(typeof s.booking.resources=="string"?s.booking.resources.split(",").map(Number):s.booking.resources)??[],timetables:(typeof s.booking.timetables=="string"?s.booking.timetables.split(",").map(Number):s.booking.timetables)??[],booking_preference:s.booking.booking_preference,player_email:s.booking.player_email,duration:s.booking.duration,public:s.booking.public}),k=()=>{e.started_at=T(e.started_at),e.put(route("playtomic.bookings.update",s.booking.id),{onSuccess:()=>{e.reset(),E.visit(route("playtomic.bookings.index"))}})},m=f(s.resources);N(async()=>{if(e.club_id){const p=await _.post(route("playtomic.resources.filter",{club:e.club_id}));m.value=p.data}}),P(()=>e.club_id,async p=>{if(!p){m.value=[],e.resources=[];return}try{const o=await _.post(route("playtomic.resources.filter",{club:p}));m.value=o.data,e.resources=[]}catch(o){console.error("Error fetching resources:",o),m.value=[]}});const y=f([{label:"Playtomic"},{label:s.title,url:route("playtomic.bookings.index")},{label:"Edit",url:route("playtomic.bookings.edit",s.booking.id)}]);return(p,o)=>{const V=L,c=U,b=w,x=j,v=S;return a(),q($,{items:y.value},{default:D(()=>[l("div",I,[o[16]||(o[16]=l("h1",{class:"text-2xl font-bold mb-4"},"Edit Booking",-1)),l("form",{onSubmit:O(k,["prevent"]),class:"space-y-6"},[l("div",M,[l("div",R,[o[8]||(o[8]=l("label",{value:"Start Date",class:"required"},null,-1)),i(V,{modelValue:t(e).started_at,"onUpdate:modelValue":o[0]||(o[0]=r=>t(e).started_at=r),inline:"",dateFormat:"yy-mm-dd",touchUI:!1,showIcon:!1,class:"w-full",style:{minWidth:"18rem"}},null,8,["modelValue"]),t(e).errors.started_at?(a(),n("small",F,u(t(e).errors.started_at),1)):d("",!0)]),l("div",W,[l("div",Y,[o[9]||(o[9]=l("label",{class:"required"},"Club",-1)),i(c,{modelValue:t(e).club_id,"onUpdate:modelValue":o[1]||(o[1]=r=>t(e).club_id=r),options:s.clubs,optionValue:"id",optionLabel:"name",placeholder:"Select a club"},null,8,["modelValue","options"]),t(e).errors.club_id?(a(),n("small",z,u(t(e).errors.club_id),1)):d("",!0)]),l("div",A,[o[10]||(o[10]=l("label",{for:"resources",required:""},"Resources",-1)),i(b,{modelValue:t(e).resources,"onUpdate:modelValue":o[2]||(o[2]=r=>t(e).resources=r),options:m.value,optionValue:"id",optionLabel:"name",placeholder:"Select resources",filter:""},null,8,["modelValue","options"]),t(e).errors.resources?(a(),n("small",G,u(t(e).errors.resources),1)):d("",!0)]),l("div",H,[o[11]||(o[11]=l("label",{for:"timetables",required:""},"Timetables",-1)),i(b,{modelValue:t(e).timetables,"onUpdate:modelValue":o[3]||(o[3]=r=>t(e).timetables=r),options:s.timetables,optionValue:"id",optionLabel:"name",placeholder:"Select timetables",filter:""},null,8,["modelValue","options"]),t(e).errors.timetables?(a(),n("small",J,u(t(e).errors.timetables),1)):d("",!0)]),l("div",K,[o[12]||(o[12]=l("label",{for:"booking_preference",required:""},"Booking Preference",-1)),i(c,{modelValue:t(e).booking_preference,"onUpdate:modelValue":o[4]||(o[4]=r=>t(e).booking_preference=r),options:s.bookingPreferences,optionValue:"id",optionLabel:"name",placeholder:"Select preference"},null,8,["modelValue","options"]),t(e).errors.booking_preference?(a(),n("small",Q,u(t(e).errors.booking_preference),1)):d("",!0)]),l("div",X,[o[13]||(o[13]=l("label",{required:""},"Player",-1)),i(c,{modelValue:t(e).player_email,"onUpdate:modelValue":o[5]||(o[5]=r=>t(e).player_email=r),options:s.players,optionValue:"email",optionLabel:"name",placeholder:"Select player"},null,8,["modelValue","options"]),t(e).errors.player_email?(a(),n("small",Z,u(t(e).errors.player_email),1)):d("",!0)]),l("div",ee,[l("div",null,[o[14]||(o[14]=l("label",{for:"duration",class:"required mr-2"},"Duration",-1)),i(c,{modelValue:t(e).duration,"onUpdate:modelValue":o[6]||(o[6]=r=>t(e).duration=r),options:s.durations,optionValue:"id",optionLabel:"name",placeholder:"Select duration"},null,8,["modelValue","options"]),t(e).errors.duration?(a(),n("small",oe,u(t(e).errors.duration),1)):d("",!0)]),l("div",null,[o[15]||(o[15]=l("label",{for:"public",class:"mr-2"},"Is Public",-1)),i(x,{modelValue:t(e).public,"onUpdate:modelValue":o[7]||(o[7]=r=>t(e).public=r),onLabel:"Public",offLabel:"No public"},null,8,["modelValue"])])])])]),l("div",te,[i(v,{type:"submit",label:"Update"}),l("a",{href:p.route("playtomic.bookings.index"),class:"border border-gray-300 px-4 py-2 rounded-md"}," Cancel ",8,le)])],32)])]),_:1},8,["items"])}}},je=C(se,[["__scopeId","data-v-eb084be0"]]);export{je as default};
