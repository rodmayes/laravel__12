import{s as z}from"./index-C7JHgchM.js";import{s as M,a as T}from"./index-D6iydve2.js";import{s as j,a as F}from"./index-D8yHlQsc.js";import{s as L}from"./index-B2bG8-be.js";import{s as J}from"./index-qwsCAThh.js";import{s as K}from"./index-CVEuAQA3.js";import{r as v,T as U,a as _,o as A,i as E,b as w,w as l,e as n,d as s,K as f,L as g,f as b,t as C,c as Y,g as q,h as G}from"./app-BlNzP-Qy.js";import{_ as H}from"./AppLayout-qSeyv-th.js";import Q from"./Create-Db8j7o4Z.js";import W from"./Edit-D3yv_HTq.js";import X from"./Import-BPqTaebN.js";import{p as Z}from"./lodash-Bx_x07WJ.js";import"./index-2qYAH-Va.js";import"./index-Ci_lUkU0.js";import"./index-Cqjt_D2-.js";import"./index-CQ_1oJ6Q.js";import"./index-4qaaCO_G.js";import"./index-BYafp3sT.js";import"./index-C5W7pBj7.js";import"./index-4RaZttnM.js";import"./index-C4fsPZzA.js";import"./index-CuecAFEF.js";import"./index-CrlDN87a.js";import"./DropdownLink-DZ1swxXI.js";import"./index-Cf7dxWOV.js";import"./index-BXR1ZY2p.js";import"./index-BR-a37oG.js";import"./loadToast-BsY7vkKY.js";import"./index-CfMFk64A.js";import"./index-G3kHZbHY.js";const ee={class:"card"},te={class:"flex flex-wrap gap-2 items-center justify-between"},se={class:"text-xl font-bold"},oe={class:"flex items-center gap-4"},re={key:0},ze={__name:"Index",props:{title:String,results:Object,perPage:Number},setup($){const{pickBy:O}=Z,p=$,d=v(!1),y=U({}),m=_({...p.results}),t=_({params:{search:"",page:1,perPage:p.perPage??20,sort:JSON.stringify([{field:"date_at",order:"desc"}])},createOpen:!1,editOpen:!1,importOpen:!1,result:null}),i=()=>{const o=O(t.params);G.post(route("lottery.results.refreshData"),o).then(e=>{Object.assign(m,e.data.results)})},x=()=>{var o;d.value=!1,y.delete(route("lottery.destroy",(o=t.result)==null?void 0:o.id),{preserveScroll:!0,onSuccess:()=>{y.reset(),i()}})},k=o=>{t.params.page=o.page+1,t.params.perPage=o.rows,i()},S=o=>{var a;const e=(a=o.multiSortMeta)==null?void 0:a.map(u=>({field:u.field,order:u.order===1?"asc":"desc"}));t.params.sort=JSON.stringify(e),i()},h=()=>i();A(()=>{i()});const N=v([{label:"Lottery"},{label:p.title,url:route("lottery.results.index")}]);return(o,e)=>{const a=K,u=J,D=F,P=L,I=j,c=T,V=M,B=z;return w(),E(H,{items:N.value},{default:l(()=>[n("div",ee,[s(u,{class:"mb-4"},{start:l(()=>[f(s(a,{label:"Create",onClick:e[0]||(e[0]=r=>t.createOpen=!0),icon:"pi pi-plus",severity:"success",size:"small",class:"mr-2"},null,512),[[g,o.can(["lottery.results_create"])]]),f(s(a,{label:"Import results from excel",onClick:e[1]||(e[1]=r=>t.importOpen=!0),icon:"pi pi-file-import",severity:"secondary",size:"small"},null,512),[[g,o.can(["lottery.results_import"])]])]),_:1}),s(Q,{show:t.createOpen,onClose:e[2]||(e[2]=r=>{t.createOpen=!1,i()}),title:p.title},null,8,["show","title"]),s(W,{show:t.editOpen,onClose:e[3]||(e[3]=r=>{t.editOpen=!1,i()}),result:t.result,title:p.title},null,8,["show","result","title"]),s(X,{show:t.importOpen,onClose:e[4]||(e[4]=r=>{t.importOpen=!1,i()})},null,8,["show"]),s(V,{value:m.data,lazy:"",paginator:"",rows:m.per_page,totalRecords:m.total,first:(m.current_page-1)*m.per_page,rowsPerPageOptions:[5,10,20,50],sortMode:"multiple",sortField:"date_at",sortOrder:-1,onPage:k,onSort:S,tableStyle:"min-width: 50rem",size:"small",stripedRows:""},{header:l(()=>[n("div",te,[n("span",se,C(p.title),1),s(I,null,{default:l(()=>[s(D,null,{default:l(()=>e[8]||(e[8]=[n("i",{class:"pi pi-search"},null,-1)])),_:1,__:[8]}),s(P,{modelValue:t.params.search,"onUpdate:modelValue":e[5]||(e[5]=r=>t.params.search=r),placeholder:"Keyword Search",onInput:i},null,8,["modelValue"])]),_:1})])]),paginatorstart:l(()=>[s(a,{type:"button",icon:"pi pi-refresh",text:"",onClick:h})]),empty:l(()=>e[9]||(e[9]=[b(" No data found. ")])),loading:l(()=>e[10]||(e[10]=[b(" Loading data. Please wait. ")])),default:l(()=>[s(c,{header:"No",field:"id",sortable:""}),s(c,{field:"date_at",header:"Date",sortable:""}),s(c,{field:"numbers",header:"Numbers",sortable:""}),s(c,{exportable:!1,style:{"min-width":"12rem"}},{body:l(r=>[f(s(a,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:R=>{t.editOpen=!0,t.result=r.data}},null,8,["onClick"]),[[g,o.can(["lottery.results_update"])]]),f(s(a,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:R=>{d.value=!0,t.result=r.data}},null,8,["onClick"]),[[g,o.can(["lottery.results_delete"])]])]),_:1})]),_:1},8,["value","rows","totalRecords","first"]),s(B,{visible:d.value,"onUpdate:visible":e[7]||(e[7]=r=>d.value=r),style:{width:"450px"},header:"Confirm",modal:!0},{footer:l(()=>[s(a,{label:"No",icon:"pi pi-times",text:"",onClick:e[6]||(e[6]=r=>d.value=!1)}),s(a,{label:"Yes",icon:"pi pi-check",onClick:x})]),default:l(()=>[n("div",oe,[e[13]||(e[13]=n("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1)),t.result?(w(),Y("span",re,[e[11]||(e[11]=b(" Are you sure you want to delete ")),n("b",null,C(t.result.name),1),e[12]||(e[12]=b("? "))])):q("",!0)])]),_:1},8,["visible"])])]),_:1},8,["items"])}}};export{ze as default};
