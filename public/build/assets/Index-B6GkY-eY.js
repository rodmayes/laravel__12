import{s as F}from"./index-DHW-Isfz.js";import{s as j,a as M}from"./index-DBCduUWc.js";import{s as T,a as U}from"./index-Dv-kvlDw.js";import{s as z}from"./index-CmLk1XAt.js";import{s as R}from"./index-DcVHzutC.js";import{s as E}from"./index-BWRVypym.js";import{F as v,T as G,G as Y,X as A,Y as w,c as H,o as _,w as r,b as n,a as t,H as f,I as g,e as c,t as x,f as J,g as K}from"./app-BXKsk4Hn.js";import{_ as L}from"./AppLayout-Du8wScWe.js";import X from"./Create-CoXdVP0H.js";import q from"./Edit-CW1JnVV0.js";import{p as Q}from"./lodash-BgmbBU3H.js";import"./index-CMJwYcPe.js";import"./index-CC7TtCDa.js";import"./index-Bvzdffx4.js";import"./index-DP5ewM03.js";import"./index-CuD07zZf.js";import"./index-DUdGs5jH.js";import"./index-4sGh9kCV.js";import"./index-DNQpVgdC.js";import"./index-DP0y9bu6.js";import"./index-C5ismy7n.js";import"./index-CHrlQWtL.js";import"./index-BJiRVnqE.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-Qjj9tnQ_.js";import"./index-Yo9ZL1-U.js";import"./index-NU00o1A1.js";const W={class:"card"},Z={class:"flex flex-wrap gap-2 items-center justify-between"},ee={class:"text-xl font-bold"},te={class:"flex items-center gap-4"},se={key:0},Pe={__name:"Index",props:{title:String,filters:Object,permissions:Object,roles:Object,perPage:Number},setup(l){const{_:y,debounce:C,pickBy:$}=Q,p=l,d=v(!1),b=G({}),s=Y({params:{search:p.filters.search,field:p.filters.field,order:p.filters.order,createOpen:!1,editOpen:!1},permission:null}),k=()=>{var o;d.value=!1,b.delete(route("permission.destroy",(o=s.permission)==null?void 0:o.id),{preserveScroll:!0,onSuccess:()=>{b.reset()},onError:()=>null,onFinish:()=>null})},S=o=>{w.get(route("permission.index"),{page:o.page+1,perPage:o.rows},{preserveState:!0})},O=o=>{var a;const e=(a=o.multiSortMeta)==null?void 0:a.map(u=>({field:u.field,order:u.order===1?"asc":"desc"}));s.params.sort=JSON.stringify(e)};A(()=>y.cloneDeep(s.params),C(()=>{let o=$(s.params);w.get(route("permission.index"),o,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const h=v([{label:"Users Management"},{label:"Permissions",url:route("permission.index")}]);return(o,e)=>{const a=E,u=R,N=U,D=z,P=T,m=M,V=j,B=F;return _(),H(L,{items:h.value},{default:r(()=>[n("div",W,[t(u,{class:"mb-4"},{start:r(()=>[f(t(a,{label:"Create",onClick:e[0]||(e[0]=i=>s.createOpen=!0),icon:"pi pi-plus",severity:"success",size:"small"},null,512),[[g,o.can(["permission.create"])]])]),_:1}),t(X,{show:s.createOpen,onClose:e[1]||(e[1]=i=>s.createOpen=!1),title:p.title},null,8,["show","title"]),t(q,{show:s.editOpen,onClose:e[2]||(e[2]=i=>s.editOpen=!1),permission:s.permission,title:p.title},null,8,["show","permission","title"]),t(V,{value:l.permissions.data,lazy:"",paginator:"",rows:l.permissions.per_page,totalRecords:l.permissions.total,first:(l.permissions.current_page-1)*l.permissions.per_page,onPage:S,onSort:O,tableStyle:"min-width: 50rem",size:"small",stripedRows:"",rowsPerPageOptions:[5,10,20,50],sortMode:"multiple",sortField:"id","sort-order":"1"},{header:r(()=>[n("div",Z,[n("span",ee,x(p.title),1),t(P,null,{default:r(()=>[t(N,null,{default:r(()=>e[6]||(e[6]=[n("i",{class:"pi pi-search"},null,-1)])),_:1,__:[6]}),t(D,{modelValue:s.params.search,"onUpdate:modelValue":e[3]||(e[3]=i=>s.params.search=i),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:r(()=>e[7]||(e[7]=[c(" No data found. ")])),loading:r(()=>e[8]||(e[8]=[c(" Loading data. Please wait. ")])),default:r(()=>[t(m,{header:"No",field:"id",sortable:""}),t(m,{field:"name",header:"Name",sortable:""}),t(m,{field:"guard_name",header:"Guard",sortable:""}),t(m,{field:"created_at",header:"Created",sortable:""}),t(m,{field:"updated_at",header:"Updated",sortable:""}),t(m,{exportable:!1,style:{"min-width":"12rem"}},{body:r(i=>[f(t(a,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:I=>(s.editOpen=!0,s.permission=i.data)},null,8,["onClick"]),[[g,o.can(["permission.update"])]]),f(t(a,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:I=>{d.value=!0,s.permission=i.data}},null,8,["onClick"]),[[g,o.can(["permission.delete"])]])]),_:1})]),_:1},8,["value","rows","totalRecords","first"]),t(B,{visible:d.value,"onUpdate:visible":e[5]||(e[5]=i=>d.value=i),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[t(a,{label:"No",icon:"pi pi-times",text:"",onClick:e[4]||(e[4]=i=>d.value=!1)}),t(a,{label:"Yes",icon:"pi pi-check",onClick:k})]),default:r(()=>[n("div",te,[e[11]||(e[11]=n("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1)),s.permission?(_(),J("span",se,[e[9]||(e[9]=c("Are you sure you want to delete ")),n("b",null,x(s.permission.name),1),e[10]||(e[10]=c("?"))])):K("",!0)])]),_:1},8,["visible"])])]),_:1},8,["items"])}}};export{Pe as default};
