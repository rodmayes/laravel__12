import{s as D}from"./index-ChJKIlCL.js";import{s as P}from"./index-CimEelRQ.js";import{s as F}from"./index-CfT6KGyY.js";import{s as O}from"./index-tTgwqWQu.js";import{s as L}from"./index-B6FSQOG7.js";import{c as R,p as S}from"./useFormatters-DgKqr0j9.js";import{r as V,a as T,P as z,c as n,b as o,e as t,d,F as g,j as f,t as i,n as J,f as _,u as x,p as u,g as C,w as v}from"./app-Cxz8kPVe.js";import"./index-WfSVfh0v.js";import"./index-BpllR3yN.js";import"./index-C-D5iXqe.js";import"./index-J0zXWw-N.js";import"./index-B7cmCZ4f.js";import"./index-DywEHISW.js";import"./index-9Xaz2Oaa.js";import"./index-CrDboz2d.js";import"./index-Cgv2F6jj.js";const E={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},I={class:"flex justify-between items-start w-full mb-2"},M={class:"flex flex-col"},U={class:"font-bold text-white"},q={class:"text-sm text-gray-400"},A={class:"flex flex-col items-end text-sm"},G={class:"text-gray-400 whitespace-nowrap text-sm"},H={key:0},K={key:1},Q={class:"flex justify-between"},W={class:"mt-2 flex justify-start gap-2"},X={class:"mt-2 flex justify-end gap-2"},Y={class:"grid grid-cols-1 gap-2"},fe={__name:"BookingCards",props:{items:Object,onPageChange:Function,onSortChange:Function,onRefresh:Function,deleteDialog:Object,data:Object,deleteData:Function,router:Object,can:Function},emits:["confirmDelete"],setup(l,{emit:w}){const k=l,m=V(!1),y=T({booking:null,logs:[]}),b=w,h=z(()=>k.items.data??[]),B=r=>{y.logs=r&&r.log?JSON.parse(r.log):[],m.value=!0};return(r,s)=>{const p=L,c=O,N=F,$=P,j=D;return o(),n("div",null,[t("div",E,[(o(!0),n(g,null,f(h.value,e=>(o(),n("div",{key:e.id,class:"p-4 border rounded shadow"},[t("div",I,[t("div",M,[t("h3",U,i(e.player.name),1),t("p",q,i(e.club.name),1)]),t("div",A,[t("span",{class:J([{"text-green-700":e.status==="on-time","text-blue-700":e.status==="closed","text-red-700":e.status==="time-out"},"font-medium"])}," ["+i(e.id)+"] "+i(e.status),3),t("p",G,[e.modified_at&&!isNaN(Date.parse(e.modified_at))?(o(),n("span",H," Job: "+i(e.modified_at),1)):(o(),n("span",K,"-"))])])]),t("p",null,[s[3]||(s[3]=t("strong",null,"Booking day: ",-1)),_(" "+i(e.started_at?x(R)(x(S)(e.started_at)):""),1)]),t("p",null,[s[4]||(s[4]=t("strong",null,"Resources: ",-1)),(o(!0),n(g,null,f(e.resourcesNames,a=>(o(),u(p,{key:a.id,value:a.name},null,8,["value"]))),128))]),t("p",null,[s[5]||(s[5]=t("strong",null,"Timetables: ",-1)),(o(!0),n(g,null,f(e.timetablesNames,a=>(o(),u(p,{key:a.id,value:a.name},null,8,["value"]))),128))]),t("div",Q,[t("div",W,[e.isBooked?(o(),u(p,{key:0,severity:"success",value:"Booked",rounded:""})):(o(),u(p,{key:1,severity:"danger",value:"Non Booked",rounded:""}))]),t("div",X,[l.can(["playtomic.booking_edit"])?(o(),u(c,{key:0,icon:"pi pi-pencil",outlined:"",rounded:"",onClick:a=>r.$inertia.visit(r.route("playtomic.bookings.edit",e.id))},null,8,["onClick"])):C("",!0),d(c,{icon:"pi pi-comments",severity:"info",outlined:"",rounded:"",onClick:a=>B(e)},null,8,["onClick"]),l.can(["playtomic.booking_delete"])?(o(),u(c,{key:1,icon:"pi pi-trash",severity:"danger",outlined:"",rounded:"",onClick:a=>b("confirmDelete",e)},null,8,["onClick"])):C("",!0)])])]))),128))]),d(N,{class:"mt-4"},{start:v(()=>[d(c,{icon:"pi pi-refresh",text:"",onClick:s[0]||(s[0]=e=>b("refresh"))})]),end:v(()=>s[6]||(s[6]=[])),_:1}),d($,{rows:l.items.per_page,totalRecords:l.items.total,first:(l.items.current_page-1)*l.items.per_page,onPage:k.onPageChange,rowsPerPageOptions:[5,10,20,50],class:"mt-4"},null,8,["rows","totalRecords","first","onPage"]),d(j,{visible:m.value,"onUpdate:visible":s[2]||(s[2]=e=>m.value=e),style:{width:"50rem"},header:"Logs",modal:!0,maximizable:""},{footer:v(()=>[d(c,{label:"Close",icon:"pi pi-times",text:"",onClick:s[1]||(s[1]=e=>m.value=!1)})]),default:v(()=>[t("div",Y,[(o(!0),n(g,null,f(y.logs,e=>(o(),n("p",null,[t("small",null,[s[7]||(s[7]=t("i",{class:"fas fa-dot-circle"},null,-1)),_(" "+i(e),1)])]))),256))])]),_:1},8,["visible"])])}}};export{fe as default};
