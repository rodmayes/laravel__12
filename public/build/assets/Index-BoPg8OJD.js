import{s as L}from"./index-DHW-Isfz.js";import{s as R,a as z}from"./index-DBCduUWc.js";import{s as E}from"./index-BT8mLhEt.js";import{s as A,a as G}from"./index-Dv-kvlDw.js";import{s as H}from"./index-CmLk1XAt.js";import{s as J}from"./index-DcVHzutC.js";import{s as K,_ as Y}from"./AppLayout-Du8wScWe.js";import{s as q}from"./index-Bvzdffx4.js";import{s as Q}from"./index-BWRVypym.js";import{F as b,T as W,G as _,M as X,c as Z,o as C,w as r,b as m,a as t,H as v,I as y,e as f,t as w,f as ee,g as te,L as oe}from"./app-BXKsk4Hn.js";import se from"./Create-DuKcwcCq.js";import re from"./Edit-Bo5euMcy.js";import{p as ae}from"./lodash-BgmbBU3H.js";import{l as le}from"./loadToast-BVWcLhCU.js";import"./index-CMJwYcPe.js";import"./index-CC7TtCDa.js";import"./index-CuD07zZf.js";import"./index-DUdGs5jH.js";import"./index-4sGh9kCV.js";import"./index-DP5ewM03.js";import"./index-DNQpVgdC.js";import"./index-DP0y9bu6.js";import"./index-C5ismy7n.js";import"./index-CHrlQWtL.js";import"./index-BJiRVnqE.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-Qjj9tnQ_.js";import"./index-Yo9ZL1-U.js";import"./index-NU00o1A1.js";const ie={class:"card"},ne={class:"flex flex-wrap gap-2 items-center justify-between"},pe={class:"text-xl font-bold"},me={class:"flex items-center gap-4"},de={key:0},ze={__name:"Index",props:{title:String,filters:Object,items:Object,clubs:Object,perPage:Number},setup($){const{pickBy:h}=ae,l=$;le();const c=b(!1),g=W({}),d=_({...l.items}),o=_({params:{search:l.filters.search,field:l.filters.field,order:l.filters.order,perPage:l.perPage??20,visible:!0,club:null},createOpen:!1,editOpen:!1,resource:null}),i=()=>{const a=h(o.params,e=>e!=null);oe.post(route("playtomic.resources.refreshData"),a).then(e=>{Object.assign(d,e.data.items)})},x=()=>{var a;c.value=!1,g.delete(route("playtomic.resources.destroy",(a=o.resource)==null?void 0:a.id),{preserveScroll:!0,onSuccess:()=>{g.reset(),i()},onError:()=>null,onFinish:()=>null})},V=a=>{o.params.page=a.page+1,o.params.perPage=a.rows,i()},k=a=>{var n;const e=(n=a.multiSortMeta)==null?void 0:n.map(u=>({field:u.field,order:u.order===1?"asc":"desc"}));o.params.sort=JSON.stringify(e),i()},O=()=>i();X(()=>{i()});const S=b([{name:"Visibles",value:!0},{name:"No visibles",value:!1}]),N=b([{label:"Playtomic"},{label:l.title,url:route("playtomic.resources.index")}]);return(a,e)=>{const n=Q,u=q,P=K,D=J,I=G,B=H,F=A,p=z,T=E,U=R,j=L;return C(),Z(Y,{items:N.value},{default:r(()=>[m("div",ie,[t(D,{class:"mb-4"},{start:r(()=>[v(t(n,{label:"Create",onClick:e[0]||(e[0]=s=>o.createOpen=!0),icon:"pi pi-plus",severity:"success",size:"small"},null,512),[[y,a.can(["playtomic.resource_create"])]])]),end:r(()=>[t(u,{modelValue:o.params.club,"onUpdate:modelValue":e[1]||(e[1]=s=>o.params.club=s),options:l.clubs,optionValue:"id",optionLabel:"name",placeholder:"Filter by Club",showClear:"",onChange:i,class:"mr-2"},null,8,["modelValue","options"]),t(P,{modelValue:o.params.visible,"onUpdate:modelValue":e[2]||(e[2]=s=>o.params.visible=s),options:S.value,optionValue:"value",optionLabel:"name",onChange:i},null,8,["modelValue","options"])]),_:1}),t(se,{show:o.createOpen,onClose:e[3]||(e[3]=s=>o.createOpen=!1),title:l.title,onUpdated:i,clubs:l.clubs},null,8,["show","title","clubs"]),t(re,{show:o.editOpen,onClose:e[4]||(e[4]=s=>o.editOpen=!1),resource:o.resource,title:l.title,onUpdated:i,clubs:l.clubs},null,8,["show","resource","title","clubs"]),t(U,{value:d.data,lazy:"",paginator:"",rows:d.per_page,totalRecords:d.total,first:(d.current_page-1)*d.per_page,rowsPerPageOptions:[5,10,20,50],sortMode:"multiple",sortField:"name",sortOrder:-1,onPage:V,onSort:k,tableStyle:"min-width: 50rem",size:"small"},{header:r(()=>[m("div",ne,[m("span",pe,w(l.title),1),t(F,null,{default:r(()=>[t(I,null,{default:r(()=>e[8]||(e[8]=[m("i",{class:"pi pi-search"},null,-1)])),_:1,__:[8]}),t(B,{modelValue:o.params.search,"onUpdate:modelValue":e[5]||(e[5]=s=>o.params.search=s),placeholder:"Keyword Search",onInput:i},null,8,["modelValue"])]),_:1})])]),paginatorstart:r(()=>[t(n,{type:"button",icon:"pi pi-refresh",text:"",onClick:O})]),empty:r(()=>e[9]||(e[9]=[f(" No data found. ")])),loading:r(()=>e[10]||(e[10]=[f(" Loading data. Please wait. ")])),default:r(()=>[t(p,{header:"No",field:"id",sortable:""}),t(p,{field:"name",header:"Name",sortable:""}),t(p,{field:"playtomic_id",header:"Playtomic Id",sortable:""}),t(p,{field:"priority",header:"Priority",sortable:""}),t(p,{field:"club.name",header:"Club",sortable:""}),t(p,{field:"visible",header:"Visible",sortable:""},{body:r(s=>[t(T,{severity:s.data.visible==1?"":"secondary",rounded:"",icon:s.data.visible==1?"pi pi-eye":"pi pi-eye-slash"},null,8,["severity","icon"])]),_:1}),t(p,{exportable:!1,style:{"min-width":"12rem"}},{body:r(s=>[v(t(n,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:M=>(o.editOpen=!0,o.resource=s.data)},null,8,["onClick"]),[[y,a.can(["playtomic.resource_edit"])]]),v(t(n,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:M=>{c.value=!0,o.resource=s.data}},null,8,["onClick"]),[[y,a.can(["playtomic.resource_delete"])]])]),_:1})]),_:1},8,["value","rows","totalRecords","first"]),t(j,{visible:c.value,"onUpdate:visible":e[7]||(e[7]=s=>c.value=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[t(n,{label:"No",icon:"pi pi-times",text:"",onClick:e[6]||(e[6]=s=>c.value=!1)}),t(n,{label:"Yes",icon:"pi pi-check",onClick:x})]),default:r(()=>[m("div",me,[e[13]||(e[13]=m("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1)),o.resource?(C(),ee("span",de,[e[11]||(e[11]=f("Are you sure you want to delete ")),m("b",null,w(o.resource.name),1),e[12]||(e[12]=f("?"))])):te("",!0)])]),_:1},8,["visible"])])]),_:1},8,["items"])}}};export{ze as default};
