import{s as P}from"./index-Ci_lUkU0.js";import{s as $,a as S}from"./index-D6iydve2.js";import{s as V}from"./index-B2bG8-be.js";import{s as R}from"./index-CVEuAQA3.js";import{_ as B}from"./AppLayout-qSeyv-th.js";import{r as n,o as I,a as T,i as A,b as D,w as r,e as c,d as o,f as J,t as O,u as U,N as _,h as q}from"./app-BlNzP-Qy.js";import E from"./DialogForm-B_dkxzxx.js";import{p as L}from"./lodash-Bx_x07WJ.js";import{l as M}from"./loadToast-BsY7vkKY.js";import"./index-Cqjt_D2-.js";import"./index-2qYAH-Va.js";import"./index-CQ_1oJ6Q.js";import"./index-D8yHlQsc.js";import"./index-4qaaCO_G.js";import"./index-BYafp3sT.js";import"./index-C5W7pBj7.js";import"./index-4RaZttnM.js";import"./index-C4fsPZzA.js";import"./index-CuecAFEF.js";import"./index-C7JHgchM.js";import"./index-CrlDN87a.js";import"./DropdownLink-DZ1swxXI.js";import"./index-Cf7dxWOV.js";import"./index-BXR1ZY2p.js";const z={class:"card"},F={class:"flex justify-between items-center mb-4"},G={class:"flex justify-between"},H={class:"text-xl font-bold"},he={__name:"Index",props:{title:String,filters:Object,items:Object,availableCommands:Array,perPage:Number},setup(h){const{pickBy:g}=L;M();const s=h,i=n(s.items),u=n(null),d=n(!1),f=n(!1),C=()=>{u.value=null,f.value=!1,d.value=!0},k=t=>{u.value=t,f.value=!0,d.value=!0},x=t=>{confirm(`Â¿Seguro que deseas eliminar el comando "${t.command}"?`)&&_.delete(route("scheduled-job-commands.destroy",t.id),{onSuccess:()=>b()})},b=()=>{const t=g(v.params,e=>e!=null);q.post(route("scheduled-job-commands.index"),t).then(e=>{s.items.value=e.data.items})};I(b);const v=T({params:{search:s.filters.search,perPage:s.perPage??20,timetable:null,page:1,sort:{field:"command",order:"-1"}},booking:null}),y=n([{label:"Administration"},{label:s.title,url:route("scheduled-job-commands.index")}]);return(t,e)=>{const m=R,j=V,l=S,w=$,N=P;return D(),A(B,{items:y.value},{default:r(()=>[c("div",z,[c("div",F,[o(m,{label:"Nuevo",icon:"pi pi-plus",onClick:C})]),o(w,{value:i.value.data,stripedRows:"",responsiveLayout:"scroll"},{header:r(()=>[c("div",G,[c("span",H,O(s.title),1),o(j,{modelValue:v.params.search,"onUpdate:modelValue":e[0]||(e[0]=a=>v.params.search=a),placeholder:"Search...",onInput:t.onRefresh},null,8,["modelValue","onInput"])])]),paginatorstart:r(()=>[o(m,{icon:"pi pi-refresh",text:"",onClick:t.onRefresh},null,8,["onClick"])]),empty:r(()=>e[3]||(e[3]=[J("No data found.")])),default:r(()=>[o(l,{field:"command",header:"Command",sortable:""}),o(l,{header:"Scheduled",field:"scheduled_for",sortable:""}),o(l,{header:"Parameters",body:a=>{var p;return((p=a.parameters)==null?void 0:p.join(", "))??"-"},sortable:""},null,8,["body"]),o(l,{field:"status",header:"Status",sortable:""}),o(l,{header:"Actions"},{body:r(({data:a})=>[o(m,{icon:"pi pi-pencil",class:"mr-2",onClick:p=>k(a),outlined:"",rounded:""},null,8,["onClick"]),o(m,{icon:"pi pi-trash",severity:"danger",onClick:p=>x(a),outlined:"",rounded:""},null,8,["onClick"])]),_:1})]),_:1},8,["value"]),o(N,{rows:i.value.per_page,totalRecords:i.value.total,first:(i.value.current_page-1)*i.value.per_page,rowsPerPageOptions:[5,10,20],onPage:e[1]||(e[1]=a=>U(_).visit(t.route("scheduled-job-commands.index",{page:a.page+1}))),class:"mt-3"},null,8,["rows","totalRecords","first"]),o(E,{visible:d.value,"onUpdate:visible":e[2]||(e[2]=a=>d.value=a),"available-commands":s.availableCommands,job:u.value,"is-editing":f.value,onRefresh:b},null,8,["visible","available-commands","job","is-editing"])])]),_:1},8,["items"])}}};export{he as default};
