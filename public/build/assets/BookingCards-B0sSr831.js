import{s as F}from"./index-C4lvvraB.js";import{s as O}from"./index-DQLB793R.js";import{s as P}from"./index-CTi-Lker.js";import{s as j}from"./index-ChyoiKwM.js";import{b as h,p as L}from"./useFormatters-UnLyAQ4m.js";import{r as R,a as S,I as V,c as n,b as s,e as o,d,F as p,M as m,t as a,n as z,f as v,u as y,i as C,g as x,w as g}from"./app-BitM9Esh.js";import"./index-DtIMjM1X.js";import"./index-DYoa0sVQ.js";import"./index-3G90EgRb.js";import"./index-eTxTr7Xb.js";import"./index-JehCiGv6.js";import"./index-BoR1qmRO.js";import"./index-ByyraLLP.js";import"./index-CyWtV5jm.js";import"./index-CxtCzB2E.js";const I={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},J={class:"flex justify-between mb-2"},M={class:"font-bold"},T={class:"text-sm text-gray-500"},E={key:0},U={key:1},q={class:"mt-2 flex justify-end gap-2"},A={class:"grid grid-cols-1 gap-2"},it={__name:"BookingCards",props:{items:Object,onPageChange:Function,onSortChange:Function,onRefresh:Function,deleteDialog:Object,data:Object,deleteData:Function,router:Object,can:Function},emits:["confirmDelete"],setup(i,{emit:w}){const f=i,c=R(!1),b=S({booking:null,logs:[]}),k=w,_=V(()=>f.items.data??[]),D=r=>{b.logs=r&&r.log?JSON.parse(r.log):[],c.value=!0};return(r,e)=>{const u=j,N=P,$=O,B=F;return s(),n("div",null,[o("div",I,[(s(!0),n(p,null,m(_.value,t=>(s(),n("div",{key:t.id,class:"p-4 border rounded shadow"},[o("div",J,[o("div",null,[o("h3",M,a(t.player.name),1),o("p",T,a(t.club.name),1)]),o("span",{class:z({"text-green-700":t.status==="on-time","text-blue-700":t.status==="closed","text-red-700":t.status==="time-out"})}," ["+a(t.id)+"] "+a(t.status),3)]),o("p",null,[e[3]||(e[3]=o("strong",null,"Booking day: ",-1)),v(" "+a(t.started_at?y(h)(y(L)(t.started_at)):""),1)]),o("p",null,[e[4]||(e[4]=o("strong",null,"Job day: ",-1)),t.modified_at&&!isNaN(Date.parse(t.modified_at))?(s(),n("span",E,a(t.modified_at),1)):(s(),n("span",U,"-"))]),o("p",null,[e[5]||(e[5]=o("strong",null,"Resources: ",-1)),(s(!0),n(p,null,m(t.resourcesNames,l=>(s(),n("span",{key:l.id},a(l.name),1))),128))]),o("p",null,[e[6]||(e[6]=o("strong",null,"Timetables: ",-1)),(s(!0),n(p,null,m(t.timetablesNames,l=>(s(),n("span",{key:l.id},a(l.name),1))),128))]),o("div",q,[i.can(["playtomic.booking_edit"])?(s(),C(u,{key:0,icon:"pi pi-pencil",outlined:"",rounded:"",onClick:l=>r.$inertia.visit(r.route("playtomic.bookings.edit",t.id))},null,8,["onClick"])):x("",!0),d(u,{icon:"pi pi-comments",severity:"info",outlined:"",rounded:"",onClick:l=>D(t)},null,8,["onClick"]),i.can(["playtomic.booking_delete"])?(s(),C(u,{key:1,icon:"pi pi-trash",severity:"danger",outlined:"",rounded:"",onClick:l=>k("confirmDelete",t)},null,8,["onClick"])):x("",!0)])]))),128))]),d(N,{class:"mt-4"},{start:g(()=>[d(u,{icon:"pi pi-refresh",text:"",onClick:e[0]||(e[0]=t=>k("refresh"))})]),end:g(()=>e[7]||(e[7]=[])),_:1}),d($,{rows:i.items.per_page,totalRecords:i.items.total,first:(i.items.current_page-1)*i.items.per_page,onPage:f.onPageChange,rowsPerPageOptions:[5,10,20,50],class:"mt-4"},null,8,["rows","totalRecords","first","onPage"]),d(B,{visible:c.value,"onUpdate:visible":e[2]||(e[2]=t=>c.value=t),style:{width:"50rem"},header:"Logs",modal:!0,maximizable:""},{footer:g(()=>[d(u,{label:"Close",icon:"pi pi-times",text:"",onClick:e[1]||(e[1]=t=>c.value=!1)})]),default:g(()=>[o("div",A,[(s(!0),n(p,null,m(b.logs,t=>(s(),n("p",null,[o("small",null,[e[8]||(e[8]=o("i",{class:"fas fa-dot-circle"},null,-1)),v(" "+a(t),1)])]))),256))])]),_:1},8,["visible"])])}}};export{it as default};
