import{s as B}from"./index-Be9g_1Eo.js";import{s as F}from"./index-slZyNfaV.js";import{s as O}from"./index-BfHKTmDq.js";import{a as P,p as $}from"./useFormatters-DpE799yv.js";import{F as j,G as L,D as R,f as n,o as s,b as t,a as c,K as p,L as m,t as a,n as S,e as b,u as k,c as v,g as y,w as C}from"./app-CB0dyodM.js";import"./index-CC8WqAJb.js";import"./index-3fzsDt9u.js";import"./index-B_9G0EJD.js";import"./index-BHVtOMWe.js";import"./index-DnFyHfri.js";import"./index-B56-Iuev.js";import"./index-BeX3UZgX.js";import"./index-o8mNz6P9.js";import"./index-Es7jeU_p.js";const V={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},z={class:"flex justify-between mb-2"},J={class:"font-bold"},T={class:"text-sm text-gray-500"},E={key:0},G={key:1},I={class:"mt-2 flex justify-end gap-2"},K={class:"grid grid-cols-1 gap-2"},ne={__name:"BookingCards",props:{items:Object,onPageChange:Function,onSortChange:Function,onRefresh:Function,deleteDialog:Object,data:Object,deleteData:Function,router:Object,can:Function},emits:["confirmDelete"],setup(i,{emit:x}){const g=i,d=j(!1),f=L({booking:null,logs:[]}),_=x,w=R(()=>g.items.data??[]),D=r=>{f.logs=r&&r.log?JSON.parse(r.log):[],d.value=!0};return(r,o)=>{const u=O,N=F,h=B;return s(),n("div",null,[t("div",V,[(s(!0),n(p,null,m(w.value,e=>(s(),n("div",{key:e.id,class:"p-4 border rounded shadow"},[t("div",z,[t("div",null,[t("h3",J,a(e.player.name),1),t("p",T,a(e.club.name),1)]),t("span",{class:S({"text-green-700":e.status==="on-time","text-blue-700":e.status==="closed","text-red-700":e.status==="time-out"})}," ["+a(e.id)+"] "+a(e.status),3)]),t("p",null,[o[2]||(o[2]=t("strong",null,"Booking day: ",-1)),b(" "+a(e.started_at?k(P)(k($)(e.started_at)):""),1)]),t("p",null,[o[3]||(o[3]=t("strong",null,"Job day: ",-1)),e.modified_at&&!isNaN(Date.parse(e.modified_at))?(s(),n("span",E,a(e.modified_at),1)):(s(),n("span",G,"-"))]),t("p",null,[o[4]||(o[4]=t("strong",null,"Resources: ",-1)),(s(!0),n(p,null,m(e.resourcesNames,l=>(s(),n("span",{key:l.id},a(l.name),1))),128))]),t("p",null,[o[5]||(o[5]=t("strong",null,"Timetables: ",-1)),(s(!0),n(p,null,m(e.timetablesNames,l=>(s(),n("span",{key:l.id},a(l.name),1))),128))]),t("div",I,[i.can(["playtomic.booking_edit"])?(s(),v(u,{key:0,icon:"pi pi-pencil",outlined:"",rounded:"",onClick:l=>r.$inertia.visit(r.route("playtomic.bookings.edit",e.id))},null,8,["onClick"])):y("",!0),c(u,{icon:"pi pi-comments",severity:"info",outlined:"",rounded:"",onClick:l=>D(e)},null,8,["onClick"]),i.can(["playtomic.booking_delete"])?(s(),v(u,{key:1,icon:"pi pi-trash",severity:"danger",outlined:"",rounded:"",onClick:l=>_("confirmDelete",e)},null,8,["onClick"])):y("",!0)])]))),128))]),c(N,{rows:i.items.per_page,totalRecords:i.items.total,first:(i.items.current_page-1)*i.items.per_page,onPage:g.onPageChange,rowsPerPageOptions:[5,10,20,50],class:"mt-4"},null,8,["rows","totalRecords","first","onPage"]),c(h,{visible:d.value,"onUpdate:visible":o[1]||(o[1]=e=>d.value=e),style:{width:"50rem"},header:"Logs",modal:!0,maximizable:""},{footer:C(()=>[c(u,{label:"Close",icon:"pi pi-times",text:"",onClick:o[0]||(o[0]=e=>d.value=!1)})]),default:C(()=>[t("div",K,[(s(!0),n(p,null,m(f.logs,e=>(s(),n("p",null,[t("small",null,[o[6]||(o[6]=t("i",{class:"fas fa-dot-circle"},null,-1)),b(" "+a(e),1)])]))),256))])]),_:1},8,["visible"])])}}};export{ne as default};
