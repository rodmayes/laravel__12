import{s as E}from"./index-ChJKIlCL.js";import{s as $}from"./index-tTgwqWQu.js";import{s as F}from"./index-CYkK37In.js";import{T as U,p as k,b as a,w as y,e as s,q as I,d as f,c as i,g as b,u as l,t as m,F as x,j as _,f as C}from"./app-Cxz8kPVe.js";import{l as O}from"./loadToast-BmxbEe_F.js";import"./index-BpllR3yN.js";import"./index-C-D5iXqe.js";import"./index-BGeYvXUX.js";import"./index-B7cmCZ4f.js";import"./index-DywEHISW.js";const T={class:"flex flex-col gap-4"},Y={class:"flex flex-col lg:flex-row gap-10 items-start justify-center w-full"},q={class:"flex flex-col gap-2"},A={key:0,class:"text-red-500"},G={class:"flex flex-col gap-2 flex-1"},J={class:"flex flex-col gap-2"},L={key:0,class:"text-red-500"},M={class:"flex flex-col gap-2"},P={class:"flex flex-wrap gap-2 max-w-full overflow-x-auto"},W={key:0,class:"text-red-500"},z={class:"flex justify-end gap-2"},le={__name:"Create",props:{show:Boolean,title:String},emits:["close"],setup(S,{emit:N}){const{toast:p}=O(),d=S,g=N,e=U({date_at:new Date,numbers:[],complementary:null,errors:[]}),v=Array.from({length:49},(r,t)=>t+1),w=[];for(let r=0;r<v.length;r+=10)w.push(v.slice(r,r+10));const V=r=>{const t=e.numbers.indexOf(r);t===-1?e.numbers.length<6&&e.numbers.push(r):e.numbers.splice(t,1)},B=()=>{var t;if(e.numbers.length!==6){p.add({severity:"error",summary:"Error",detail:"You must select exactly 6 numbers",life:3e3});return}if(!e.complementary){p.add({severity:"error",summary:"Error",detail:"You must select one complementary number",life:3e3});return}const r={date_at:e.date_at instanceof Date?e.date_at.toISOString().slice(0,10):e.date_at,numbers:JSON.stringify(e.numbers),complementary:e.complementary};e.post(route("lottery.results.store",(t=d.result)==null?void 0:t.id),{...r,preserveScroll:!0,onSuccess:()=>{g("close"),e.reset()},onError:()=>{var c;if(e.response&&e.response.status===500){const n=((c=e.response.data)==null?void 0:c.message)||"Unexpected error";p.add({severity:"error",summary:"Server Error",detail:n,life:4e3})}},onFinish:()=>null})},D=r=>{e.complementary=r};return(r,t)=>{const c=F,n=$,j=E;return a(),k(j,{visible:d.show,"onUpdate:visible":t[2]||(t[2]=o=>d.show=o),position:"top",modal:"",header:"Create "+d.title,style:{width:"60rem"},closable:!1},{default:y(()=>[s("form",{onSubmit:I(B,["prevent"])},[s("div",T,[s("div",Y,[s("div",q,[t[3]||(t[3]=s("label",{for:"date_at"},"Date",-1)),f(c,{modelValue:l(e).date_at,"onUpdate:modelValue":t[0]||(t[0]=o=>l(e).date_at=o),inline:"",dateFormat:"yy-mm-dd",touchUI:!1,showIcon:!1,class:"w-full lg:w-[20rem] min-w-[18rem]",style:{minWidth:"18rem"}},null,8,["modelValue"]),l(e).errors.date_at?(a(),i("small",A,m(l(e).errors.date_at),1)):b("",!0)]),s("div",G,[t[4]||(t[4]=s("label",{for:"numbers"},"Numbers (select 6 from 1â€“49)",-1)),s("div",J,[(a(),i(x,null,_(w,(o,h)=>s("div",{key:"row-"+h,class:"flex flex-wrap gap-2"},[(a(!0),i(x,null,_(o,u=>(a(),k(n,{key:"btn-"+u,onClick:H=>V(u),severity:l(e).numbers.includes(u)?"":"secondary",class:"w-10 h-10 text-sm font-semibold rounded-md border transition-all flex items-center justify-center border-gray-300 dark:border-gray-600"},{default:y(()=>[C(m(u),1)]),_:2},1032,["onClick","severity"]))),128))])),64))]),l(e).errors.numbers?(a(),i("small",L,m(l(e).errors.numbers),1)):b("",!0)])]),s("div",M,[t[5]||(t[5]=s("label",{for:"complementary"},"Complementary Number (select one)",-1)),s("div",P,[(a(),i(x,null,_(49,o=>f(n,{key:"complementary-"+o,onClick:h=>D(o),severity:l(e).complementary===o?"":"secondary",class:"w-10 h-10 text-sm font-semibold rounded-md border transition-all flex items-center justify-center border-gray-300 dark:border-gray-600"},{default:y(()=>[C(m(o),1)]),_:2},1032,["onClick","severity"])),64))]),l(e).errors.complementary?(a(),i("small",W,m(l(e).errors.complementary),1)):b("",!0)]),s("div",z,[f(n,{type:"button",label:"Cancel",severity:"secondary",onClick:t[1]||(t[1]=o=>g("close"))}),f(n,{type:"submit",label:"Create"})])])],32)]),_:1},8,["visible","header"])}}};export{le as default};
