import{s as F}from"./index-Be9g_1Eo.js";import{s as U,a as L}from"./index-BCR3EMA2.js";import{s as P,a as A}from"./index-BHVtOMWe.js";import{s as E}from"./index-DnFyHfri.js";import{s as G}from"./index-BfHKTmDq.js";import{F as x,T as K,G as R,X as Y,Y as $,c as z,o as n,w as s,b as d,a as r,I as k,J as w,e as v,t as g,f as m,g as J,K as X,L as q}from"./app-CB0dyodM.js";import{_ as H}from"./AppLayout-Bnt65DdT.js";import M from"./Create-D8DCBQ6A.js";import Q from"./Edit-CV350W6f.js";import{p as W}from"./lodash-C0G_UMP2.js";import{l as Z}from"./loadToast-TseNTzfy.js";import"./index-3fzsDt9u.js";import"./index-slZyNfaV.js";import"./index-CC8WqAJb.js";import"./index-B_9G0EJD.js";import"./index-BeX3UZgX.js";import"./index-o8mNz6P9.js";import"./index-Es7jeU_p.js";import"./index-B5Q9vJ-u.js";import"./index-BGxCxXkL.js";import"./index-BeJhA7-m.js";import"./index-DF0TcBff.js";import"./index-B56-Iuev.js";import"./DropdownLink-DZXjjQov.js";import"./index-B3G1jHyt.js";import"./index-D5cDUAcg.js";const ee={class:"card"},te={class:"flex justify-end"},oe=["onClick"],re=["onClick"],se={key:2},ie={class:"flex items-center gap-4"},le={key:0},ae={class:"grid grid-cols-2 sm:grid-cols-3"},Te={__name:"Index",props:{title:String,filters:Object,permissions:Object,roles:Object,perPage:Number},setup(p){const{_:O,debounce:N,pickBy:S}=W,l=p;Z();const u=x(!1),b=x(!1),y=K({}),o=R({params:{search:l.filters.search,field:l.filters.field,order:l.filters.order,createOpen:!1,editOpen:!1},role:null}),D=()=>{var i;u.value=!1,y.delete(route("role.destroy",(i=o.role)==null?void 0:i.id),{preserveScroll:!0,onSuccess:()=>{y.reset()},onError:()=>null,onFinish:()=>null})},V=i=>{$.get(route("role.index"),{page:i.page+1},{preserveState:!0})};return Y(()=>O.cloneDeep(o.params),N(()=>{let i=S(o.params);$.get(route("role.index"),i,{replace:!0,preserveState:!0,preserveScroll:!0})},150)),(i,e)=>{const c=G,B=A,I=E,j=P,a=L,T=U,h=F;return n(),z(H,null,{default:s(()=>{var _;return[d("div",ee,[r(M,{show:o.createOpen,onClose:e[0]||(e[0]=t=>o.createOpen=!1),title:l.title,permissions:l.permissions},null,8,["show","title","permissions"]),r(Q,{show:o.editOpen,onClose:e[1]||(e[1]=t=>o.editOpen=!1),role:o.role,title:l.title,permissions:l.permissions},null,8,["show","role","title","permissions"]),k(r(c,{label:"Create",onClick:e[2]||(e[2]=t=>o.createOpen=!0),icon:"pi pi-plus"},null,512),[[w,i.can(["role.create"])]]),r(T,{lazy:"",value:p.roles.data,paginator:"",rows:p.roles.per_page,totalRecords:p.roles.total,first:(p.roles.current_page-1)*p.roles.per_page,onPage:V,tableStyle:"min-width: 50rem"},{header:s(()=>[d("div",te,[r(j,null,{default:s(()=>[r(B,null,{default:s(()=>e[7]||(e[7]=[d("i",{class:"pi pi-search"},null,-1)])),_:1,__:[7]}),r(I,{modelValue:o.params.search,"onUpdate:modelValue":e[3]||(e[3]=t=>o.params.search=t),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})])]),empty:s(()=>e[8]||(e[8]=[v(" No data found. ")])),loading:s(()=>e[9]||(e[9]=[v(" Loading data. Please wait. ")])),default:s(()=>[r(a,{header:"No"},{body:s(t=>[v(g(t.index+1),1)]),_:1}),r(a,{field:"name",header:"Name"}),r(a,{field:"guard_name",header:"Guard"}),r(a,{header:"Permission"},{body:s(t=>[t.data.permissions.length==l.permissions.length?(n(),m("div",{key:0,onClick:f=>(b.value=!0,o.role=t.data),class:"whitespace-nowrap cursor-pointer text-blue-600 dark:text-blue-400 font-bold underline"}," All Permission ",8,oe)):t.data.permissions.length>0?(n(),m("div",{key:1,onClick:f=>(b.value=!0,o.role=t.data),class:"whitespace-nowrap cursor-pointer text-blue-600 dark:text-blue-400 font-bold underline"},g(t.data.permissions.length)+" Permission ",9,re)):(n(),m("div",se,g(t.data.permissions.length)+" Permission ",1))]),_:1}),r(a,{field:"created_at",header:"Created"}),r(a,{field:"updated_at",header:"Updated"}),r(a,{exportable:!1,style:{"min-width":"12rem"}},{body:s(t=>[k(r(c,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:f=>(o.editOpen=!0,o.role=t.data)},null,8,["onClick"]),[[w,i.can(["role.update"])]]),k(r(c,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:f=>{u.value=!0,o.role=t.data}},null,8,["onClick"]),[[w,i.can(["role.delete"])]])]),_:1})]),_:1},8,["value","rows","totalRecords","first"]),r(h,{visible:u.value,"onUpdate:visible":e[5]||(e[5]=t=>u.value=t),style:{width:"450px"},header:"Confirm",modal:!0},{footer:s(()=>[r(c,{label:"No",icon:"pi pi-times",text:"",onClick:e[4]||(e[4]=t=>u.value=!1)}),r(c,{label:"Yes",icon:"pi pi-check",onClick:D})]),default:s(()=>[d("div",ie,[e[12]||(e[12]=d("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1)),o.role?(n(),m("span",le,[e[10]||(e[10]=v("Are you sure you want to delete ")),d("b",null,g(o.role.name),1),e[11]||(e[11]=v("?"))])):J("",!0)])]),_:1},8,["visible"]),r(h,{visible:b.value,"onUpdate:visible":e[6]||(e[6]=t=>b.value=t),modal:"",header:"Permission "+((_=o.role)==null?void 0:_.name),style:{width:"50rem"}},{default:s(()=>{var t;return[d("div",ae,[(n(!0),m(X,null,q((t=o.role)==null?void 0:t.permissions,(f,C)=>(n(),m("div",{key:C,class:"flex justify-between w-full px-4 py-2"},g(++C+". "+f.name),1))),128))])]}),_:1},8,["visible","header"])])]}),_:1})}}};export{Te as default};
